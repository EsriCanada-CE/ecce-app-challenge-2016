// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"themes/PlateauTheme/widgets/HeaderController/PopupTileNodes":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dojo/dom-construct dojo/query dijit/_WidgetBase dijit/_TemplatedMixin jimu/dijit/ViewStack dojox/gesture/swipe dojox/gesture/tap jimu/utils".split(" "),function(l,d,n,a,f,b,h,m,c,g,k,e,u){var s=0;return l([m,c],{baseClass:"jimu-header-more-popup",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"pages" data-dojo-attach-point\x3d"pagesNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"points jimu-corner-bottom"\x3e\x3cdiv class\x3d"points-inner"data-dojo-attach-point\x3d"pointsNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
margin:4,postCreate:function(){this.nodes=[];this.pages=[];this.createCloseBtn()},startup:function(){this.viewStack=new g({views:[],viewType:"dom"},this.pagesNode);this.viewStack.startup();f(this.pagesNode,k.end,d.hitch(this,function(a){s<this.maximumPages-1&&a.dx&&0>a.dx?(s++,this._selectPage(s)):a.dx&&(0<a.dx&&0<s)&&(s--,this._selectPage(s))}));this.resize()},resize:function(){var g=this._calculateGridParam(),c;if(null!==g){a.setStyle(this.domNode,u.getPositionStyle(g.position));this.nodeWidth=
g.cellSize-this.margin;if(!this.oldGridParam||this.oldGridParam.rows!==g.rows||this.oldGridParam.cols!==g.cols)this.clearPages(),this.createPages(g);this.nodes.forEach(d.hitch(this,function(a,c){this.setItemNodePosition(a,c,g)}));this.oldGridParam=g;c=h("div.close",this.domNode)[0];a.setStyle(c,{width:0.25*this.nodeWidth+"px",height:0.25*this.nodeWidth+"px"})}else this.oldGridParam=null,a.setStyle(this.domNode,u.getPositionStyle({left:0,top:0,width:0,height:0,zIndex:111})),this.nodeWidth=0;!window.appInfo.isRunInMobile&&
(760<window.innerWidth&&this.numWidget&&8>=this.numWidget.length)&&this.hide()},setItemNodePosition:function(g,c,b){var e,k,f=48,q=16;e=0===c%b.cols?0:this.margin/2;k=c%(b.rows*b.cols)<b.cols?0:this.margin/2;c={};"number"===typeof this.nodeWidth&&(c.width=this.nodeWidth+"px",c.height=this.nodeWidth+"px");"number"===typeof e&&(window.isRTL?c.marginRight=e+"px":c.marginLeft=e+"px");"number"===typeof k&&(c.marginTop=k+"px");if(e=h("img",g)[0])b.iconScaled&&(f*=this.nodeWidth/120),a.setStyle(e,{width:f+
"px",height:f+"px"});if(f=h("div.node-label",g)[0])b.showLabel?(b.iconScaled&&(q*=this.nodeWidth/120),a.setStyle(f,{"font-size":q+"px",display:"block"})):a.setStyle(f,{"font-size":q+"px",display:"none"});a.setStyle(g,c)},clearPages:function(){n.forEach(this.pages,function(a){this.viewStack.removeView(a.pageNode)},this);b.empty(this.pointsNode);this.pages=[];this.nodes=[]},createPages:function(a){var g,c,e,k;this.maximumPages=g=Math.ceil(this.items.length/(a.rows*a.cols));for(c=0;c<g;c++)e=b.create("div",
{"class":"page"}),this.createPageItems(c,e,a),this.viewStack.addView(e),1<g&&(k=b.create("div",{"class":"point"},this.pointsNode),this.own(f(k,"click",d.hitch(this,this._onPageNodeClick,c)))),this.pages.push({pageNode:e,pointNode:k});0<this.viewStack.views.length&&this._selectPage(0)},_onPageNodeClick:function(a){this._selectPage(a)},_selectPage:function(c){1<this.pages.length&&(h(".point",this.domNode).removeClass("point-selected"),a.addClass(this.pages[c].pointNode,"point-selected"));this.viewStack.switchView(this.pages[c].pageNode)},
createPageItems:function(a,c,g){var b,e;b=this.items.length;e=g.rows*g.cols;g=a*e;a=(a+1)*e;e=a-b;for(a=Math.min(a,b);g<a;g++)this.createItemNode(g,c);for(g=b;g<b+e;g++)this.createEmptyItemNode(c)},createItemNode:function(a,g){var c,k;k=this.items[a];c=b.create("div",{"class":"icon-node jimu-float-leading",title:k.label,settingId:k.id},g);b.create("img",{src:k.icon},c);b.create("div",{"class":"node-label",title:k.label,innerHTML:k.label},c);c.config=k;this.own(f(c,e,d.hitch(this,function(){this.onNodeClicked(c)})));
this.nodes.push(c)},createEmptyItemNode:function(a){a=b.create("div",{"class":"icon-node jimu-float-leading"},a);this.nodes.push(a);return a},createCloseBtn:function(){var a;a=b.create("div",{"class":"close"},this.domNode);b.create("div",{"class":"close-inner"},a);f(a,"click",d.hitch(this,function(){this.hide()}));return a},hide:function(){s=0;a.setStyle(this.domNode,"display","none")},show:function(){a.setStyle(this.domNode,"display","block")},onNodeClicked:function(a){this.hide()},_calculateGridParam:function(){var c,
g,b,e,k=!1,f=!0;c=a.getContentBox(jimuConfig.mapId);g=Math.min(c.w,c.h)-40;if(360<=g)e=120;else{e=Math.floor(g/3);if(10>e)return null;k=!0;80>e&&(f=!1)}g=Math.floor((c.h-40)/e);b=Math.floor((c.w-40)/e);g=4<g?4:g;g=3>g?3:g;b=3>g?3:4<b?4:b;return{rows:g,cols:b,cellSize:e,iconScaled:k,showLabel:f,position:{top:(c.h-e*g)/2,bottom:(c.h-e*g)/2,left:(c.w-e*b)/2,right:(c.w-e*b)/2,width:e*b-this.margin*(b-1)/2,height:e*g-this.margin*(g-1)/2,zIndex:111}}}})})},"dojox/gesture/swipe":function(){define(["dojo/_base/kernel",
"dojo/_base/declare","./Base","../main"],function(l,d,n,a){l.experimental("dojox.gesture.swipe");l=d(n,{defaultEvent:"swipe",subEvents:["end"],press:function(a,b){b.touches&&2<=b.touches.length?delete a.context:(a.context||(a.context={x:0,y:0,t:0}),a.context.x=b.screenX,a.context.y=b.screenY,a.context.t=(new Date).getTime(),this.lock(b.currentTarget))},move:function(a,b){this._recognize(a,b,"swipe")},release:function(a,b){this._recognize(a,b,"swipe.end");delete a.context;this.unLock()},cancel:function(a,
b){delete a.context;this.unLock()},_recognize:function(a,b,h){if(a.context&&(a=this._getSwipeInfo(a,b)))a.type=h,this.fire(b.target,a)},_getSwipeInfo:function(a,b){var h,d,c={};d=a.context;c.time=(new Date).getTime()-d.t;h=b.screenX-d.x;d=b.screenY-d.y;if(0===h&&0===d)return null;c.dx=h;c.dy=d;return c}});a.gesture.swipe=new l;a.gesture.swipe.Swipe=l;return a.gesture.swipe})},"dojox/gesture/Base":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom dojo/on dojo/touch dojo/has ../main".split(" "),
function(l,d,n,a,f,b,h,m,c){l.experimental("dojox.gesture.Base");a.getObject("gesture",!0,c);return d(null,{defaultEvent:" ",subEvents:[],touchOnly:!1,_elements:null,constructor:function(g){a.mixin(this,g);this.init()},init:function(){this._elements=[];if(!m("touch")&&this.touchOnly)console.warn("Gestures:[",this.defaultEvent,"] is only supported on touch devices!");else{var a=this.defaultEvent;this.call=this._handle(a);this._events=[a];n.forEach(this.subEvents,function(c){this[c]=this._handle(a+
"."+c);this._events.push(a+"."+c)},this)}},_handle:function(a){var c=this;return function(e,d){var h=arguments;2<h.length&&(e=h[1],d=h[2]);if(!e||!e.nodeType&&!e.attachEvent&&!e.addEventListener)return b(e,a,d);var f=c._add(e,a,d);return{remove:function(){f.remove();c._remove(e,a)}}}},_add:function(c,k,e){var d=this._getGestureElement(c);if(!d){var d={target:c,data:{},handles:{}},f=a.hitch(this,"_process",d,"press"),l=a.hitch(this,"_process",d,"move"),m=a.hitch(this,"_process",d,"release"),n=a.hitch(this,
"_process",d,"cancel"),p=d.handles;this.touchOnly?(p.press=b(c,"touchstart",f),p.move=b(c,"touchmove",l),p.release=b(c,"touchend",m),p.cancel=b(c,"touchcancel",n)):(p.press=h.press(c,f),p.move=h.move(c,l),p.release=h.release(c,m),p.cancel=h.cancel(c,n));this._elements.push(d)}d.handles[k]=!d.handles[k]?1:++d.handles[k];return b(c,k,e)},_getGestureElement:function(a){for(var c=0,b;c<this._elements.length;c++)if(b=this._elements[c],b.target===a)return b},_process:function(a,c,b){b._locking=b._locking||
{};!b._locking[this.defaultEvent]&&!this.isLocked(b.currentTarget)&&(("INPUT"!=b.target.tagName||"radio"==b.target.type||"checkbox"==b.target.type)&&"TEXTAREA"!=b.target.tagName&&b.preventDefault(),b._locking[this.defaultEvent]=!0,this[c](a.data,b))},press:function(a,c){},move:function(a,c){},release:function(a,c){},cancel:function(a,c){},fire:function(a,c){a&&c&&(c.bubbles=!0,c.cancelable=!0,b.emit(a,c.type,c))},_remove:function(a,c){var b=this._getGestureElement(a);if(b&&b.handles){b.handles[c]--;
var d=b.handles;n.some(this._events,function(a){return 0<d[a]})||(this._cleanHandles(d),b=n.indexOf(this._elements,b),0<=b&&this._elements.splice(b,1))}},_cleanHandles:function(a){for(var c in a)a[c].remove&&a[c].remove(),delete a[c]},lock:function(a){this._lock=a},unLock:function(){this._lock=null},isLocked:function(a){return!this._lock||!a?!1:this._lock!==a&&f.isDescendant(a,this._lock)},destroy:function(){n.forEach(this._elements,function(a){this._cleanHandles(a.handles)},this);this._elements=
null}})})},"dojox/gesture/tap":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","./Base","../main"],function(l,d,n,a,f){l.experimental("dojox.gesture.tap");l=d(a,{defaultEvent:"tap",subEvents:["hold","doubletap"],holdThreshold:500,doubleTapTimeout:250,tapRadius:10,press:function(a,d){if(d.touches&&2<=d.touches.length)clearTimeout(a.tapTimeOut),delete a.context;else{var f=d.target;this._initTap(a,d);a.tapTimeOut=setTimeout(n.hitch(this,function(){this._isTap(a,d)&&this.fire(f,
{type:"tap.hold"});delete a.context}),this.holdThreshold)}},release:function(a,d){if(a.context&&this._isTap(a,d))switch(a.context.c){case 1:this.fire(d.target,{type:"tap"});break;case 2:this.fire(d.target,{type:"tap.doubletap"})}clearTimeout(a.tapTimeOut)},_initTap:function(a,d){a.context||(a.context={x:0,y:0,t:0,c:0});var f=(new Date).getTime();f-a.context.t<=this.doubleTapTimeout?a.context.c++:(a.context.c=1,a.context.x=d.screenX,a.context.y=d.screenY);a.context.t=f},_isTap:function(a,d){var f=
Math.abs(a.context.x-d.screenX),c=Math.abs(a.context.y-d.screenY);return f<=this.tapRadius&&c<=this.tapRadius}});f.gesture.tap=new l;f.gesture.tap.Tap=l;return f.gesture.tap})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(l,d,n,a,f){function b(a){for(;a.childNodes[0]&&1==a.childNodes[0].nodeType;)a=a.childNodes[0];return a}function h(c,b){"string"==typeof c?(c=a.toDom(c,b&&b.ownerDocument),11==c.nodeType&&
(c=c.childNodes[0])):1==c.nodeType&&c.parentNode&&(c=c.cloneNode(!1));return c}var m=l.NodeList;d.extend(m,{_placeMultiple:function(c,b){for(var d="string"==typeof c||c.nodeType?l(c):c,e=[],f=0;f<d.length;f++)for(var h=d[f],n=this.length,m=n-1,r;r=this[m];m--)0<f&&(r=this._cloneNode(r),e.unshift(r)),m==n-1?a.place(r,h,b):h.parentNode.insertBefore(r,h),h=r;e.length&&(e.unshift(0),e.unshift(this.length-1),Array.prototype.splice.apply(this,e));return this},innerHTML:function(a){return arguments.length?
this.addContent(a,"only"):this[0].innerHTML},text:function(a){if(arguments.length){for(var b=0,d;d=this[b];b++)1==d.nodeType&&f.set(d,"textContent",a);return this}for(var e="",b=0;d=this[b];b++)e+=f.get(d,"textContent");return e},val:function(a){if(arguments.length){for(var b=d.isArray(a),k=0,e;e=this[k];k++){var f=e.nodeName.toUpperCase(),h=e.type,l=b?a[k]:a;if("SELECT"==f){f=e.options;for(h=0;h<f.length;h++){var m=f[h];m.selected=e.multiple?-1!=n.indexOf(a,m.value):m.value==l}}else"checkbox"==h||
"radio"==h?e.checked=e.value==l:e.value=l}return this}if((e=this[0])&&1==e.nodeType){a=e.value||"";if("SELECT"==e.nodeName.toUpperCase()&&e.multiple){a=[];f=e.options;for(h=0;h<f.length;h++)m=f[h],m.selected&&a.push(m.value);a.length||(a=null)}return a}},append:function(a){return this.addContent(a,"last")},appendTo:function(a){return this._placeMultiple(a,"last")},prepend:function(a){return this.addContent(a,"first")},prependTo:function(a){return this._placeMultiple(a,"first")},after:function(a){return this.addContent(a,
"after")},insertAfter:function(a){return this._placeMultiple(a,"after")},before:function(a){return this.addContent(a,"before")},insertBefore:function(a){return this._placeMultiple(a,"before")},remove:m.prototype.orphan,wrap:function(a){if(this[0]){a=h(a,this[0]);for(var d=0,f;f=this[d];d++){var e=this._cloneNode(a);f.parentNode&&f.parentNode.replaceChild(e,f);b(e).appendChild(f)}}return this},wrapAll:function(a){if(this[0]){a=h(a,this[0]);this[0].parentNode.replaceChild(a,this[0]);a=b(a);for(var d=
0,f;f=this[d];d++)a.appendChild(f)}return this},wrapInner:function(a){if(this[0]){a=h(a,this[0]);for(var b=0;b<this.length;b++){var f=this._cloneNode(a);this._wrap(d._toArray(this[b].childNodes),null,this._NodeListCtor).wrapAll(f)}}return this},replaceWith:function(a){a=this._normalize(a,this[0]);for(var b=0,d;d=this[b];b++)this._place(a,d,"before",0<b),d.parentNode.removeChild(d);return this},replaceAll:function(a){a=l(a);for(var b=this._normalize(this,this[0]),d=0,e;e=a[d];d++)this._place(b,e,"before",
0<d),e.parentNode.removeChild(e);return this},clone:function(){for(var a=[],b=0;b<this.length;b++)a.push(this._cloneNode(this[b]));return this._wrap(a,this,this._NodeListCtor)}});m.prototype.html||(m.prototype.html=m.prototype.innerHTML);return m})},"themes/PlateauTheme/widgets/HeaderController/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings","dojo/text!./config.json"],function(){})},"url:themes/PlateauTheme/widgets/HeaderController/Widget.html":'\x3cdiv\x3e\r\n  \x3c!-- solve the bug of style delay loading --\x3e\r\n  \x3cdiv class\x3d"header-section jimu-float-leading" data-dojo-attach-point\x3d"headerNode"\x3e\r\n    \x3cimg class\x3d"logo jimu-float-leading jimu-leading-margin1" data-dojo-attach-point\x3d"logoNode" data-dojo-attach-event\x3d"onload:_onLogoLoad"\x3e\r\n    \x3cdiv class\x3d"titles jimu-float-leading jimu-leading-margin1" data-dojo-attach-point\x3d"titlesNode"\x3e\r\n      \x3cdiv class\x3d"jimu-title jimu-float-leading" data-dojo-attach-point\x3d"titleNode"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-subtitle jimu-float-leading jimu-leading-margin5" data-dojo-attach-point\x3d"subtitleNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"links jimu-float-leading jimu-leading-margin25" data-dojo-attach-point\x3d"linksNode"\x3e\r\n      \x3cdiv class\x3d"dynamic-section jimu-float-leading" data-dojo-attach-point\x3d"dynamicLinksNode"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"about-section jimu-float-leading" data-dojo-attach-point\x3d"aboutSectionNode"\x3e\r\n        \x3ca class\x3d"jimu-link" href\x3d"#" data-dojo-attach-point\x3d"aboutNode" data-dojo-attach-event\x3d"onclick:_onAboutClick"\x3e${nls.about}\x3c/a\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"signin-section jimu-float-leading" data-dojo-attach-point\x3d"signInSectionNode"\x3e\r\n        \x3ca href\x3d"#" class\x3d"jimu-link" data-dojo-attach-event\x3d"onclick:_onSigninClick"\r\n        data-dojo-attach-point\x3d"signinLinkNode"\x3e${nls.signin}\x3c/a\x3e\r\n        \x3ca href\x3d"" target\x3d"_blank" class\x3d"jimu-link" data-dojo-attach-event\x3d"onclick:_onUserNameClick" data-dojo-attach-point\x3d"userNameLinkNode"\x3e\x3c/a\x3e\r\n        \x3ca href\x3d"#" class\x3d"jimu-link" data-dojo-attach-event\x3d"onclick:_onSignoutClick" data-dojo-attach-point\x3d"signoutLinkNode"\x3e${nls.signout}\x3c/a\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"container-section jimu-float-leading" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:themes/PlateauTheme/widgets/HeaderController/css/style.css":'.jimu-widget-header-controller {box-shadow: 0px 1px 8px 0px rgba(0, 0, 0, 0.4);}.jimu-widget-header-controller .header-section {height: 100%; overflow: hidden; width: calc(100% - 360px);}.jimu-widget-header-controller .container-section {height: 100%; min-width: 80px;}.jimu-widget-header-controller .logo {cursor: pointer;}.jimu-widget-header-controller .hide-logo {display: none;}.jimu-widget-header-controller .titles {height: 100%; overflow: hidden;}.jimu-widget-header-controller .jimu-title {text-align: center; height: 100%;}.jimu-widget-header-controller .jimu-subtitle {text-align: center; height: 100%;}.jimu-widget-header-controller .links {height: 100%; overflow: hidden;}.jimu-widget-header-controller .dynamic-section, .jimu-widget-header-controller .about-section, .jimu-widget-header-controller .signin-section {height: 100%;}.jimu-widget-header-controller .links .jimu-link {height: 100%;}.jimu-widget-header-controller .signin-section .jimu-link {color: #d9dde0;}.jimu-widget-header-controller .icon-node {cursor: pointer; opacity: 1; text-align: center; border-right: 1px solid #323e4f;}.jimu-widget-header-controller .icon-node img {height: 20px; width: 20px;}.jimu-widget-header-controller .icon-node:first-child {border: none;}.jimu-widget-header-controller .icon-node:hover {opacity: 1;}.jimu-widget-header-controller .icon-node.jimu-state-selected {background-color: #697a8c; opacity: 1; border: none; border-top: 2px solid #8491a1;}.jimu-widget-header-controller .drop-triangle {position: absolute; width: 0px; height: 0px; bottom: 1px; border-left: 4px solid transparent; border-right: 4px solid transparent; border-top: 4px solid white;}.jimu-widget-header-controller .jimu-drop-menu {background-color: #363455; box-shadow: 0px 1px 8px 0px rgba(0, 0, 0, 0.4);}.jimu-widget-header-controller .jimu-drop-menu .menu-item {overflow: hidden; border-top: 1px solid #435063;}.jimu-widget-header-controller .jimu-drop-menu .menu-item:hover {background-color: #485566;}.jimu-widget-header-controller .jimu-drop-menu .menu-item img {width: 24px; height: 24px; cursor: pointer; margin: 8px;}.jimu-widget-header-controller .jimu-drop-menu .menu-item .label {cursor: pointer; margin-top: 12px; font-size: 14px; color: white; min-width: 50px; text-align: center;}.popup-links .popup-title {}.popup-links .logo {height: 30px;}.popup-links .title {color: #fff; text-align: center; font-size: 16px; width: 71.42857142857143%; overflow: hidden; white-space: nowrap; height: 100%;}.popup-links .line {width: 100%; height: 4px; border-bottom: 1px solid #393c40;}.popup-links .link-section {width: 100%; height: 66px;}.popup-links a {color: #fff; margin-left: 20px; font-size: 14px; height: 100%; width: 95%; overflow: hidden; display: inline-block;}.popup-links .link-section.signin a {color: #d9dde0;}.jimu-header-more-popup {position: absolute; border-radius: 2px; z-index: 111; background-color: #FFFFFF;}.jimu-header-more-popup .pages {position: relative; overflow: hidden; padding: 2px;}.jimu-header-more-popup .points {position: absolute; overflow: hidden; bottom: -15px; left: 0px; right: 0px; text-align: center; background-color: #bababa;}.jimu-header-more-popup .points-inner {display: inline-block; overflow: hidden;}.jimu-header-more-popup .point {float: left; width: 8px; height: 8px; margin-left: 5px; border-radius: 4px; background-color: #f2f6f9; cursor: pointer;}.jimu-header-more-popup .point-selected {background-color: #485566;}.jimu-header-more-popup .page {position: relative; overflow: hidden;}.jimu-header-more-popup .close {position: absolute; top: -04.46428571428571%; right: -04.46428571428571%; border-radius: 50%; background-color: #FFFFFF; cursor: pointer;}.jimu-rtl .jimu-header-more-popup .close {left: -04.46428571428571%; right: auto;}.jimu-header-more-popup .close-inner {width: 80%; height: 80%; margin-left: 10%; margin-top: 10%; border-radius: 50%; background-image: url("images/close.png"); background-repeat: no-repeat; background-position: center center; background-size: 13px;}.jimu-header-more-popup .icon-node {cursor: pointer;}.jimu-header-more-popup .icon-node.jimu-state-selected {background-color: red;}.jimu-header-more-popup img {width: 48px; height: 48px; margin: auto; margin-top: 25%; display: block;}.jimu-header-more-popup .node-label {width: 100%; text-align: center; font-size: 16px; margin-top: 5px; color: white; overflow: hidden; white-space: pre-line; text-overflow: ellipsis; display: inline-block; height: 20px;}@media screen and (max-width:320px){.jimu-header-more-popup .close-inner {background-size: 9px;}}@media screen and (max-width:760px) {.jimu-header-more-popup .node-label {font-size: 13px !important; height: 17px;} .jimu-widget-header-controller .header-section {width: calc(100% - 90px) !important;}}.jimu-more-icon-cover {z-index: 110; position: absolute; left: 0; top: 0; width: 100%; height: 100%;}.jimu-widget-header-controller .esriCTHidden {display: none;}.jimu-widget-header-controller .widget-open-symbol {height: 4px; width: 4px; border-radius: 4px; margin: auto; color: #FFF; background-color: #FFF;}',
"url:themes/PlateauTheme/widgets/HeaderController/config.json":'{\r\n  "groupSetting": [\r\n    {\r\n      "label": "AttributeTable",\r\n      "type": "dropDown"\r\n    }\r\n  ]\r\n}',"*now":function(l){l(['dojo/i18n!*preload*themes/PlateauTheme/widgets/HeaderController/nls/Widget*["ar","cs","da","de","en","el","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/aspect dojo/query dojo/on dojo/Deferred dojo/mouse dojo/topic dojo/dom-construct dojo/dom-geometry jimu/BaseWidget jimu/PoolControllerMixin jimu/tokenUtils jimu/portalUtils jimu/portalUrlUtils jimu/utils jimu/dijit/Message ./PopupTileNodes dojo/NodeList-manipulate".split(" "),function(l,d,n,a,f,b,h,m,c,g,k,e,u,s,v,w,r,p,x,y){return l([u,s],{baseClass:"jimu-widget-header-controller jimu-main-background",maxIconCount:-1,
createMoreIcon:!1,switchableElements:{},height:40,openedId:"",_lastOpenId:"",moveTopOnActive:!1,postCreate:function(){this.inherited(arguments);this._processGroupSetting();this.switchableElements.title=this.titleNode;this.switchableElements.links=this.linksNode;this.switchableElements.subtitle=this.subtitleNode;this.position&&this.position.height&&(this.height=this.position.height);a.setStyle(this.signInSectionNode,"display","none");this.appConfig&&this.appConfig.logo?(this.logoNode.src=this.appConfig.logo,
a.removeClass(this.logoNode,"hide-logo")):(this.logoNode.src="",a.addClass(this.logoNode,"hide-logo"));this.appConfig.title&&(this.appConfig.title=p.sanitizeHTML(this.appConfig.title));this.appConfig.subtitle&&(this.appConfig.subtitle=p.sanitizeHTML(this.appConfig.subtitle));this.switchableElements.title.innerHTML=this.appConfig.title?this.appConfig.title:"";this.switchableElements.title.title=this.appConfig.title?this.appConfig.title:"";this.switchableElements.subtitle.innerHTML=this.appConfig.subtitle?
this.appConfig.subtitle:"";this._createDynamicLinks(this.appConfig.links);this.appConfig.about?(a.setStyle(this.aboutNode,"display",""),this.aboutNode.visible=!0):(a.setStyle(this.aboutNode,"display","none"),this.aboutNode.visible=!1);this._setElementsSize();this.own(h(this.domNode,c.enter,d.hitch(this,function(){var a="",b=r.getServerByUrl(this.appConfig&&this.appConfig.portalUrl||"");r.isArcGIScom(b)&&(b="ArcGIS.com");b&&(a=this.nls.signInTo+" "+b);this.signinLinkNode.title=a})))},startup:function(){this.inherited(arguments);
this.resize()},onAction:function(a,t){if("highLight"===a&&t){var c=b('div[settingid\x3d"'+t.widgetId+'"]',this.domNode)[0];this._highLight(c)}"removeHighLight"===a&&this._removeHighLight()},onSignIn:function(q){this.inherited(arguments);a.setStyle(this.signinLinkNode,"display","none");a.setStyle(this.userNameLinkNode,"display","");a.setStyle(this.signoutLinkNode,"display","");this.userNameLinkNode.innerHTML=q.userId;a.setAttr(this.userNameLinkNode,"href",this.appConfig.portalUrl+"home/user.html");
this.popupLinkNode&&(a.setStyle(this.popupSigninNode,"display","none"),a.setStyle(this.popupUserNameNode,"display",""),a.setStyle(this.popupSignoutNode,"display",""),b("a",this.popupUserNameNode).html(q.userId).attr("href",this.appConfig.portalUrl+"home/user.html"));this.resize()},onSignOut:function(){this.inherited(arguments);this._onSignOut(this.nls.signin);w.getPortal(this.appConfig.portalUrl).loadSelfInfo().then(d.hitch(this,function(a){this._onSignOut(this.nls.signInTo+" "+a.name)}),d.hitch(this,
function(a){console.error(a)}))},_onSignOut:function(q){a.setStyle(this.signinLinkNode,"display","");a.setAttr(this.signinLinkNode,"innerHTML",q);a.setStyle(this.userNameLinkNode,"display","none");a.setStyle(this.signoutLinkNode,"display","none");this.userNameLinkNode.innerHTML="";this.popupLinkNode&&(a.setStyle(this.popupSigninNode,"display",""),a.setAttr(this.popupSigninNode,"innerHTML",q),a.setStyle(this.popupUserNameNode,"display","none"),a.setStyle(this.popupSignoutNode,"display","none"),b("a",
this.popupUserNameNode).html(""));this.resize()},resize:function(){var q=0,t=a.getStyle(this.headerNode,"float"),c=a.getStyle(this.logoNode,"float"),e=a.getStyle(this.titlesNode,"float"),f=a.getStyle(this.linksNode,"float");t&&"none"!==t&&c&&"none"!==c&&e&&"none"!==e&&f&&"none"!==f?this._resize():setTimeout(d.hitch(this,this.resize),200);b(".jimu-widget-attributetable")[0]&&(q=b(".jimu-widget-attributetable")[0].clientHeight);q?g.publish("changeMapPosition",{bottom:q}):g.publish("changeMapPosition",
{bottom:"0px"})},_resize:function(){var q=a.getContentBox(this.domNode);this._showSwitchableElements(["title","links","subtitle"]);this._getTitleContainerWidth(q);this._createIconNodes(q);this.morePane&&this.morePane.resize();this.popupLinkNode&&a.setStyle(jimuConfig.layoutId,{left:a.getContentBox(this.popupLinkNode).w+"px"})},destroy:function(){this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=null);this.morePane&&this.morePane.destroy();this.moreIconPaneCoverNode&&(a.destroy(this.moreIconPaneCoverNode),
this.moreIconPaneCoverNode=null);this.popupLinkNode&&this.popupLinksVisible&&this._hidePopupLink();a.destroy(this.popupLinkNode);this.inherited(arguments)},onAppConfigChanged:function(a,b,c){switch(b){case "attributeChange":this._onAttributeChange(a,c);break;default:return}this.appConfig=a;this.resize()},getOpenedIds:function(){this.inherited(arguments);return""===this.openedId?[]:[this.openedId]},setOpenedIds:function(a){if(0!==a.length){var b=this.getConfigById(a[0]);b&&(this.openedId=a[0],b.widgets&&
"openAll"===b.openType?this._showIconContent(b):b.widgets||this._showIconContent(b))}},_onLogoLoad:function(){this.resize()},_highLight:function(a){this.hlDiv&&this._removeHighLight();if(a){var b=e.getMarginBox(a);this.hlDiv=k.create("div",{style:{position:"absolute",left:b.l+"px",top:b.t+"px",width:b.w+"px",height:b.h+"px"},"class":"icon-highlight"},a,"before")}},_removeHighLight:function(){this.hlDiv&&(k.destroy(this.hlDiv),this.hlDiv=null)},_onAttributeChange:function(b,c){var d;"title"in c&&c.title!==
this.appConfig.title&&(d=p.sanitizeHTML(c.title),this.titleNode.innerHTML=d,this.titleNode.title=d);"subtitle"in c&&c.subtitle!==this.appConfig.subtitle&&(this.subtitleNode.innerHTML=p.sanitizeHTML(c.subtitle));"logo"in c&&c.logo!==this.appConfig.logo&&(c.logo?(a.setAttr(this.logoNode,"src",c.logo),a.removeClass(this.logoNode,"hide-logo")):(a.removeAttr(this.logoNode,"src"),a.addClass(this.logoNode,"hide-logo")));"links"in c&&this._createDynamicLinks(c.links)},_setElementsSize:function(){a.setStyle(this.logoNode,
{height:"30px",marginTop:(this.height-30)/2+"px"});a.setStyle(this.titleNode,{lineHeight:this.height+"px"});a.setStyle(this.subtitleNode,{lineHeight:this.height+"px"});b(".jimu-link",this.domNode).style({lineHeight:this.height+"px"})},_processGroupSetting:function(){n.forEach(this.appConfig.widgetPool.groups,function(a){var b;a:{if(this.config.groupSetting)for(b=0;b<this.config.groupSetting.length;b++)if(this.config.groupSetting[b].label===a.label){b=this.config.groupSetting[b].type;break a}b="openAll"}a.openType=
b},this)},_createDynamicLinks:function(b){if(window.isRTL){var c=[];n.forEach(b,function(a){c.unshift(a)});b=c}a.empty(this.dynamicLinksNode);n.forEach(b,function(b){a.create("a",{href:b.url,target:"_blank",innerHTML:p.sanitizeHTML(b.label),"class":"jimu-link jimu-align-leading jimu-leading-margin1",style:{lineHeight:this.height+"px"}},this.dynamicLinksNode)},this)},_showSwitchableElements:function(b){var c=this.switchableElements,e;for(e in c)c.hasOwnProperty(e)&&(-1<b.indexOf(e)?(a.setStyle(c[e],
"display","block"),c[e].visible=!0):(a.setStyle(c[e],"display","none"),c[e].visible=!1));this.logoClickHandle&&this.logoClickHandle.remove();0>b.indexOf("links")?this.logoClickHandle=h(this.logoNode,"click",d.hitch(this,this._onLogoClick)):(this.popupLinksVisible&&this._hidePopupLink(),a.setStyle(this.logoNode,{cursor:"default"}))},_switchSignin:function(){var a=v.getPortalCredential(this.appConfig.portalUrl);if(a)this.onSignIn(a);else this.onSignOut()},_onLogoClick:function(){this.popupLinkNode&&
a.destroy(this.popupLinkNode);this.popupLinkNode=this._createPopupLinkNode();this.popupLinksVisible?this._hidePopupLink():this._showPopupLink()},_hidePopupLink:function(){a.setStyle(this.popupLinkNode,"display","none");window.isRTL?a.setStyle(jimuConfig.layoutId,{right:0}):a.setStyle(jimuConfig.layoutId,{left:0});this.popupLinksVisible=!1},_showPopupLink:function(){a.setStyle(this.popupLinkNode,"display","");window.isRTL?a.setStyle(jimuConfig.layoutId,{right:a.getContentBox(this.popupLinkNode).w+
"px"}):a.setStyle(jimuConfig.layoutId,{left:a.getContentBox(this.popupLinkNode).w+"px"});this.popupLinksVisible=!0},_createPopupLinkNode:function(){var b,c;a.getContentBox(jimuConfig.mainPageId);b=a.create("div",{"class":"popup-links jimu-main-background",style:{position:"absolute",zIndex:100,top:0,bottom:0}},jimuConfig.mainPageId);window.isRTL?a.setStyle(b,{right:0,left:"50px"}):a.setStyle(b,{left:0,right:"50px"});c=a.create("div",{"class":"popup-title",style:{height:this.height+"px",width:"100%"}},
b);a.create("img",{"class":"logo jimu-float-leading jimu-leading-margin1",src:this.appConfig.logo?this.appConfig.logo:this.folderUrl+"images/app-logo.png",style:{width:"30px",height:"30px",marginTop:(this.height-30)/2+"px"}},c);a.create("div",{"class":"title jimu-float-leading jimu-leading-margin1",innerHTML:p.sanitizeHTML(this.appConfig.title),style:{lineHeight:this.height+"px"}},c);n.forEach(this.appConfig.links,function(a){this._createLinkNode(b,a,!1)},this);this._createLinkNode(b,{label:"",url:"#"},
!1);return b},_createLinkNode:function(b,c,d){b=a.place('\x3cdiv class\x3d"jimu-link"\x3e\x3c/div\x3e',b);a.place('\x3cdiv class\x3d"line"\x3e\x3c/div\x3e',b);d=a.place('\x3cdiv class\x3d"'+(d?"link-section signin":"link-section")+'"\x3e\x3c/div\x3e',b);a.create("a",{href:c.url,"class":"jimu-ellipsis",target:"_blank",innerHTML:p.sanitizeHTML(c.label),title:p.sanitizeHTML(c.label),style:{lineHeight:"66px"}},d);return b},_onSigninClick:function(){v.signInPortal(this.appConfig.portalUrl,this.appConfig.appId)},
_onSignoutClick:function(){this.appConfig.mode?new x({message:this.nls.cantSignOutTip}):v.signOutAll()},_onAboutClick:function(){this.widgetManager.loadWidget({id:this.appConfig.about+"_1",uri:this.appConfig.about,label:"About"}).then(d.hitch(this,function(b){a.place(b.domNode,jimuConfig.mainPageId);b.startup()}))},_onUserNameClick:function(){},_getHeaderSectionWidth:function(){return a.getMarginBox(this.headerNode).w},_getIconContainerWidth:function(){return a.getMarginBox(this.containerNode).w},
_getTitlesWidth:function(){return a.getMarginBox(this.titlesNode).w},_getlinkWidth:function(){return a.getMarginBox(this.linksNode).w},_getLogoWidth:function(){return a.getMarginBox(this.logoNode).w+12},_getHeaderContainerWidth:function(a){var b=this._getIconContainerWidth(),c=this._getLogoWidth();return a.w-b-c},_getTitleContainerWidth:function(a){a=this._getHeaderContainerWidth(a);var b=this._getTitlesWidth(),c=this._getlinkWidth();a<b+c&&(this.switchableElements.links.visible?(this._showSwitchableElements(["title",
"subtitle"]),b=this._getTitlesWidth(),a<b&&this._showSwitchableElements(["title"])):this._showSwitchableElements(["title"]))},_createIconNodes:function(c){b(".icon-node",this.containerNode).remove();this._closeDropMenu();var d,e=this.getAllConfigs();this.iconWidth=c.h;this._getTitleContainerWidth(c);c=360;c=760>=window.innerWidth?90:360;a.setStyle(this.containerNode,{width:c+"px"});this.maxIconCount=760>=window.innerWidth?2:Math.floor(8);this.maxIconCount>=e.length?(this.headerIconCount=e.length,
this.createMoreIcon=!1):(this.headerIconCount=this.maxIconCount-1,this.createMoreIcon=!0);this.createMoreIcon&&this._createIconNode({label:"more"});var f;for(c=this.headerIconCount-1;0<=c;c--){d=e[c];var g=this._createIconNode(d);d.openAtStart&&(f=g)}f&&!this.openAtStartWidget&&(this._onIconClick(f),this.openAtStartWidget=f.config.name,this.openedId=f.config.id);this.openedId&&(this.getConfigById(this.openedId)&&!1===this.getConfigById(this.openedId).inPanel)&&(e=this._getIconNodeById(this.openedId),
f=this.widgetManager.getWidgetById(this.openedId),e&&f?this._setOffPanelWidgetPosition(e,f):(this.widgetManager.closeWidget(this.openedId),this.openedId=""))},_createIconNode:function(b){var c,e,f;e="more"===b.label?this.folderUrl+"images/more_icon.png":b.icon;c=a.create("div",{"class":"icon-node jimu-float-trailing",title:b.label,settingId:b.id,style:{width:"45px",height:this.height+"px",textAlign:"center"}},this.containerNode);f=a.create("div",{"class":"widget-symbol-div",style:{width:"100%"}},
c);a.create("img",{src:e,style:{marginTop:(this.height-30)/2+3+"px",marginBottom:"3px"}},f);a.create("div",{"class":"widget-open-symbol esriCTHidden"},c);"more"===b.label?h(c,"click",d.hitch(this,this._showMorePane,b)):h(c,"click",d.hitch(this,function(){this._onIconClick(c)}));c.config=b;c.config.widgets&&(1<c.config.widgets.length&&"dropDown"===c.config.openType)&&this._createDropTriangle(c);this.openedId===b.id&&(a.addClass(c,"jimu-state-selected"),c.config.widgets&&(1<c.config.widgets.length&&
"dropDown"===c.config.openType)&&this._openDropMenu(c));return c},_createDropTriangle:function(b){var c=a.getMarginBox(b);a.create("div",{"class":"drop-triangle",style:{left:c.l+c.w/2-4+"px"}},b)},_onIconClick:function(a){this.openedId&&(this._lastOpenId=this.openedId);!a.config.widgets||1===a.config.widgets.length||"openAll"===a.config.openType?this.openedId&&this.openedId===a.config.id?this._switchNodeToClose(this._lastOpenId):this.openedId?this._switchNodeToClose(this.openedId).then(d.hitch(this,
function(){this._closeDropMenu();this._switchNodeToOpen(a.config.id)})):this._switchNodeToOpen(a.config.id):this.openedId&&this.openedId===a.config.id?(this.openedId="",this._closeDropMenu()):(this.openedId=a.config.id,this._closeDropMenu(),this._openDropMenu(a))},_closeDropMenu:function(){this.dropMenuNode&&(a.destroy(this.dropMenuNode),this.dropMenuNode=null)},_openDropMenu:function(b){this.dropMenuNode=a.create("div",{"class":"jimu-drop-menu",title:b.config.label,style:{position:"absolute",zIndex:"101"}});
a.place(this.dropMenuNode,this.containerNode);n.forEach(b.config.widgets,function(a){this._createDropMenuItem(a)},this);this._setDropMenuPosition(b);this.morePane&&this.morePane.hide()},_createDropMenuItem:function(b){var c=a.create("div",{"class":"menu-item",title:p.sanitizeHTML(b.label),style:{height:this.height+"px"}},this.dropMenuNode);a.create("img",{"class":"jimu-float-leading",src:b.icon},c);a.create("div",{"class":"label jimu-float-leading",innerHTML:p.sanitizeHTML(b.label)},c);this.own(h(c,
"click",d.hitch(this,function(){this._closeDropMenu();this._switchNodeToClose(this._lastOpenId).then(d.hitch(this,function(){this._showIconContent(c.config)}))})));c.config=b;return c},_setDropMenuPosition:function(b){var c={},c=a.getMarginBox(this.dropMenuNode),c=this._getDropdownPosition(b,c);a.setStyle(this.dropMenuNode,p.getPositionStyle(c))},_getDropdownPosition:function(b,c){var d={},e=a.getMarginBox(b),f=a.getMarginBox(this.domNode);d.top=this.height+1;window.isRTL?d.right=0>e.l+e.w-c.w?0:
e.l+e.w-c.w:e.l+c.w>f.w?d.right=0:d.left=e.l;return d},_switchNodeToOpen:function(c){c=this._getIconNodeById(c);b(".icon-node",this.domNode).removeClass("jimu-state-selected");b(".widget-open-symbol",this.domNode).addClass("esriCTHidden");a.addClass(c,"jimu-state-selected");a.removeClass(c.children[1],"esriCTHidden");this._showIconContent(c.config)},_switchNodeToClose:function(a){b(".icon-node",this.domNode).removeClass("jimu-state-selected");this._setMapCanvasAreaToDefault();b(".widget-open-symbol",
this.domNode).addClass("esriCTHidden");var c=this.getConfigById(a);if(c)return!1===c.inPanel?(this.widgetManager.closeWidget(a),this.openedId="",a=new m,a.resolve(),a):this.panelManager.closePanel(a+"_panel");a=new m;a.resolve();return a},_setMapCanvasAreaToDefault:function(){if(window.appInfo.isRunInMobile){var a=0;b(".jimu-widget-attributetable")[0]&&(a=b(".jimu-widget-attributetable")[0].clientHeight);a?g.publish("changeMapPosition",{bottom:a}):g.publish("changeMapPosition",{bottom:"0px"})}else g.publish("changeMapPosition",
{right:"0px"})},_setMapCanvasArea:function(){if(window.appInfo.isRunInMobile){var a=0;b(".jimu-widget-attributetable")[0]&&(a=b(".jimu-widget-attributetable")[0].clientHeight);if(this.panelManager&&this.panelManager.panels&&this.panelManager.panels[0]&&"normal"===this.panelManager.panels[0].windowState){var c=this.panelManager.getPositionOnMobile(this);a&&a>c.top?g.publish("changeMapPosition",{bottom:a}):g.publish("changeMapPosition",{bottom:c.top})}else 36<a?g.publish("changeMapPosition",{bottom:a}):
window.hasOwnProperty("ontouchstart")||void 0!==window.ontouchstart||760>=window.innerWidth?g.publish("changeMapPosition",{bottom:"36px"}):g.publish("changeMapPosition",{bottom:"0px"})}else this.panelManager&&this.panelManager.activePanel&&"minimized"===this.panelManager.activePanel.windowState?g.publish("changeMapPosition",{right:"0px"}):(g.publish("changeMapPosition",{right:"360px"}),this._resizeAttributeTableinRTL())},_resizeAttributeTableinRTL:function(){b(".jimu-widget-attributetable")[0]&&(window.isRTL?
a.setStyle(b(".jimu-widget-attributetable")[0],"right","0px"):a.setStyle(b(".jimu-widget-attributetable")[0],"left","0px"),b(".dijitTabContainer",b(".jimu-widget-attributetable")[0])[0]&&dijit.byId(b(".dijitTabContainer",b(".jimu-widget-attributetable")[0])[0].id).resize())},_getIconNodeById:function(a){a=b('.icon-node[settingId\x3d"'+a+'"]',this.domNode);if(0!==a.length)return a[0]},_onPanelClose:function(a){b('.icon-node[settingId\x3d"'+a+'"]',this.domNode).removeClass("jimu-state-selected");this.openedId=
""},_showIconContent:function(c){!1===c.inPanel?this.widgetManager.loadWidget(c).then(d.hitch(this,function(e){this.openedId=c.id;var g=this._getIconNodeById(c.id);a.setStyle(e.domNode,"zIndex",101);this._setOffPanelWidgetPosition(g,e);this.widgetManager.openWidget(e);this.own(f.after(e,"onClose",d.hitch(this,function(){b(".widget-open-symbol",this.domNode).addClass("esriCTHidden");this._setMapCanvasAreaToDefault()})))})):(this._setMapCanvasArea(),this.panelManager.showPanel(c).then(d.hitch(this,
function(a){this.openedId=c.id;this.own(f.after(a,"onClose",d.hitch(this,function(){this._onPanelClose(c.id);this._setMapCanvasAreaToDefault()})))})))},_setOffPanelWidgetPosition:function(a,b){var c=this._getDropdownPosition(a,this.widgetManager.getWidgetMarginBox(b));b.setPosition(c,this.containerNode)},_showMorePane:function(){var b,c,e=[],g=this.getAllConfigs();for(b=this.headerIconCount;b<g.length;b++)c=g[b],e.push(c);this.morePane&&this.morePane.destroy();this.moreIconPaneCoverNode&&a.destroy(this.moreIconPaneCoverNode);
this._closeDropMenu();this.morePane=new y({openedId:this.openedId,items:e,numWidget:g});this._createCoverNode();a.place(this.morePane.domNode,jimuConfig.mapId);this.morePane.startup();f.after(this.morePane,"onNodeClicked",d.hitch(this,function(b){this._moveConfigToHeader(b.config);this._createIconNodes(a.getContentBox(this.domNode));this._onIconClick(this._getIconNodeById(b.config.id))}),!0);f.after(this.morePane,"hide",d.hitch(this,function(){a.destroy(this.moreIconPaneCoverNode)}),!0)},_moveConfigToHeader:function(a){var b=
this.getAllConfigs(),c=a.index;a.index=b[this.headerIconCount-1].index;b[this.headerIconCount-1].index=c},_createCoverNode:function(){this.moreIconPaneCoverNode=a.create("div",{"class":"jimu-more-icon-cover"},jimuConfig.layoutId)}})});