// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/Measurement":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/debounce dojo/sniff dojo/number dojo/dom-style dojo/dom-construct dojox/gfx dijit/_Widget dijit/registry dijit/Menu dijit/MenuItem ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../geometry/geodesicUtils ../geometry/webMercatorUtils ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../graphic ../tasks/AreasAndLengthsParameters ../tasks/LengthsParameters ../tasks/GeometryService ../kernel ../config ../domUtils ../lang ../units ../WKIDUnitConversion ../SpatialReference dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./_EventedWidget dojo/text!./templates/Measurement.html dojo/i18n!../nls/jsapi dijit/form/ToggleButton dijit/form/DropDownButton dijit/layout/ContentPane".split(" "),
function(n,p,e,g,c,u,r,k,q,s,x,A,H,f,D,E,I,z,J,K,B,v,F,m,C,l,L,M,N,V,O,w,P,y,Q,G,R,S,T,U,t){return p([T,H,R,S],{declaredClass:"esri.dijit.Measurement",widgetsInTemplate:!0,templateString:U,_map:null,_geometryService:null,_interpolatedMap:null,_mouseImgURL:null,_defaultPinURL:null,_measureGraphics:[],_measureGraphic:null,_locationGraphic:null,_tempGraphic:null,_polylineGraphics:null,_polygonGraphic:null,_pointSymbol:null,_useDefaultPointSymbol:!0,_defaultLineSymbol:null,_lineSymbol:null,_areaLineSymbol:null,
_defaultFillSymbol:null,_fillSymbol:null,_borderlessFillSymbol:null,_inputPoints:[],_unitDictionary:[],numberPattern:"#,###,###,##0.0",result:null,_defaultDistanceUnit:null,_defaultAreaUnit:null,_defaultLocationUnit:null,currentDistanceUnit:null,currentAreaUnit:null,currentLocationUnit:null,_unitStrings:{},_locationUnitStrings:[],_locationUnitStringsLong:[],_distanceUnitStrings:[],_distanceUnitStringsLong:[],_areaUnitStrings:[],_areaUnitStringsLong:[],_calculatingMsg:null,_gsErrorMsg:null,_NLS_Lat:null,
_NLS_Lon:null,_mouseMoveMapHandler:null,_mouseClickMapHandler:null,_doubleClickMapHandler:null,_mouseDragMapHandler:null,_clickMapHandler:null,_mapExtentChangeHandler:null,_geometryAreaHandler:null,_snappingCallback:null,_calcTimer:null,_buttonDijits:{},previousTool:null,activeTool:null,markerLongitude:null,markerLatitude:null,mouseLongitude:null,mouseLatitude:null,_eventMap:{"measure-start":["toolName","unitName"],measure:["toolName","geometry","values","unitName","segmentLength"],"measure-end":["toolName",
"geometry","values","unitName"],"tool-change":["toolName","unitName","previousToolName"],"unit-change":["unitName","toolName"]},constructor:function(a,b){a=a||{};if(a.map){this._map=a.map;if(this._map.loaded)this._map.cs=this._checkCS(this._map.spatialReference),this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs);else var d=c.connect(this._map,"onLoad",this,function(){c.disconnect(d);d=null;this._map.cs=this._checkCS(this._map.spatialReference);this._interpolatedMap=!("Web Mercator"===
this._map.cs||"PCS"===this._map.cs)});this._geometryService=O.defaults.geometryService;this._mouseImgURL=n.toUrl("./images/cursor16x24.png");this._defaultPinURL=n.toUrl("./images/esriGreenPin16x26.png");this._defaultLineSymbol=new z(z.STYLE_SOLID,new u([0,128,255]),3);this._defaultFillSymbol=new J(z.STYLE_SOLID,new z(z.STYLE_SOLID,new u([0,128,255]),3),new u([0,0,0,0.5]));a.pointSymbol?(this._pointSymbol=a.pointSymbol,this._useDefaultPointSymbol=!1):(this._pointSymbol=new I(this._defaultPinURL,16,
26),this._pointSymbol.setOffset(0,12));var h=a.fillSymbol||this._defaultFillSymbol;this._fillSymbol=h;this._areaLineSymbol=h.outline||this._defaultLineSymbol;this._borderlessFillSymbol=K.fromJson(h.toJson());this._borderlessFillSymbol.setOutline(null);this._lineSymbol=a.lineSymbol?a.lineSymbol:this._defaultLineSymbol;this._defaultDistanceUnit=a.defaultLengthUnit?a.defaultLengthUnit:y.MILES;this._defaultAreaUnit=a.defaultAreaUnit?a.defaultAreaUnit:y.ACRES;this._defaultLocationUnit=a.defaultLocationUnit?
a.defaultLocationUnit:y.DECIMAL_DEGREES;this._snappingCallback=e.hitch(this,this._snappingCallback);a.geometry&&(this._userGeometry=a.geometry);this._calcTimer=null;this.advancedLocationUnits=a.advancedLocationUnits||!1;this.simpleLocationResults=a.simpleLocationResults||!1;this._NLS_Lon=t.widgets.measurement.NLS_longitude;this._NLS_Lat=t.widgets.measurement.NLS_latitude;this._gsErrorMsg=t.widgets.measurement.NLS_geometry_service_error;this._calculatingMsg=t.widgets.measurement.NLS_calculating;this._geometryServiceLength=
r(this._geometryServiceLength,250)}else console.log("Unable to find the required 'map' property in widget parameters")},startup:function(){this._setupDictionaries();x.create("img",{src:this._mouseImgURL,style:"vertical-align:middle"},this.mouseCell);this._useDefaultPointSymbol?x.create("img",{src:this._defaultPinURL,style:"vertical-align:middle"},this.pinCell):this._drawPointGraphics(this.pinCell);if(this._userGeometry)if(this._map.loaded)this._measureCustomGeometry();else var a=c.connect(this._map,
"onLoad",this,function(){c.disconnect(a);a=null;this._measureCustomGeometry()})},destroy:function(){this._resetToolState();this.clearResult();this.inherited(arguments);this._map=this._geometryService=this._measureGraphics=this._measureGraphic=this._tempGraphic=null},setTool:function(a,b){this.previousTool=this.activeTool||null;this._polylineGraphics=[];this._resetToolState();this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null);var d=f.byNode(this._buttonDijits[a].domNode).checked;
s.set(this._unitDropDown.domNode,"visibility","visible");f.byNode(this._buttonDijits.area.domNode).set("checked",!1);f.byNode(this._buttonDijits.distance.domNode).set("checked",!1);f.byNode(this._buttonDijits.location.domNode).set("checked",!1);if(!0===b||!1===b)d=b;f.byNode(this._buttonDijits[a].domNode).set("checked",d);this._toggleLocationResultsTable(!1,!0);d?(this.activeTool=a,(this._dblClickZoom=this._map.isDoubleClickZoom)&&this._map.disableDoubleClickZoom(),"area"===a?this._setupAreaTool():
"distance"===a?this._setupDistanceTool():"location"===a&&this._setupLocationTool(),this._map.snappingManager&&(this._map.snappingManager._startSelectionLayerQuery(),this._map.snappingManager._setUpSnapping())):(this.activeTool=null,s.set(this._unitDropDown.domNode,"visibility","hidden"));if(this.activeTool!==this.previousTool)this.onToolChange(this.activeTool,this.getUnit(),this.previousTool)},measure:function(a){a&&(this._userGeometry=a,this._measureCustomGeometry())},clearResult:function(){var a=
this._map;this.result=0;f.byNode(this.resultValue.domNode).set("content","\x26nbsp");var b;for(b=0;b<this._measureGraphics.length;b++)a.graphics.remove(this._measureGraphics[b]);this._measureGraphic=null;this._measureGraphics=[];a.graphics.remove(this._tempGraphic);c.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null},show:function(){w.show(this.domNode)},hide:function(){w.hide(this.domNode)},showTool:function(a){s.set(this._buttonDijits[a].domNode,"display","inline-block")},hideTool:function(a){s.set(this._buttonDijits[a].domNode,
"display","none")},getTool:function(){if(this.activeTool)return{toolName:this.activeTool,unitName:this.getUnit()}},getUnit:function(){if("unit"!==this._unitDropDown.label)return this._unitDropDown.label},_setupLocationTool:function(){this._map.navigationManager.setImmediateClick(!0);this._measureGraphics=[];this._map.graphics.remove(this._locationGraphic);this._createLocationUnitList();"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=c.connect(this._map,
"onExtentChange",e.hitch(this,this._projectMapExtent)));this._clickMapHandler=c.connect(this._map,"onClick",this,"_locationClickHandler");this._mouseMoveMapHandler=c.connect(this._map,"onMouseMove",this,"_locationMoveHandler");this._mouseDragMapHandler=c.connect(this._map,"onMouseDrag",e.hitch(this,function(){f.byNode(this.resultValue.domNode).set("disabled",!0)}))},_locationButtonToggle:function(){this.clearResult();this.setTool("location")},_measureCustomPoint:function(){this.setTool("location",
!0);"Web Mercator"===this._map.cs&&this._userGeometry.spatialReference!==this._map.spatialReference&&(this._userGeometry=v.geographicToWebMercator(this._userGeometry));this._measureGraphic=new l;this._measureGraphic.setSymbol(this._pointSymbol);this._measureGraphic.setGeometry(this._userGeometry);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._measurePoint(this._userGeometry)},_calculateLocation:function(a,b){var d="esriDegreeMinuteSeconds"===this.currentLocationUnit||
"esriDecimalDegrees"===this.currentLocationUnit?!1:!0;d&&this._mouseMoveMapHandler&&(c.disconnect(this._mouseMoveMapHandler),this._mouseMoveMapHandler=null);var h=e.clone(a);if(b){if("Web Mercator"!==this.map.cs&&this.map.spatialReference&&4326!==this.map.spatialReference.wkid){this._projectLocation(h,d);return}this._updateMarkerLocation(h.x,h.y)}h=this._getGCSLocation(h);this._advancedLocationDisplayHandler(h,d,b)},_projectLocation:function(a,b){this._geometryService.project([a],new G({wkid:4326}),
e.hitch(this,function(a){this._advancedLocationDisplayHandler(a[0],b,!0)}),e.hitch(this,function(a){console.log(this._gsErrorMsg,a)}))},_advancedLocationDisplayHandler:function(a,b,d){b?this._updateGeocoordinateStringLocation({coordinates:[[a.x,a.y]],sr:{wkid:4326},conversionType:this._unitStrings[this.currentLocationUnit]},a.geometry):(b=this._calculateXY(a.x,a.y),d?(this._updateClickLocation(b[0],b[1]),this.onMeasureEnd(this.activeTool,a,[b[0],b[1]],this.getUnit())):this._updateMouseLocation(b[0],
b[1]))},_updateMarkerLocation:function(a,b){this.markerLocationX=a;this.markerLocationY=b},_updateMouseLocation:function(a,b){this.mouseLongitude.innerHTML=a;this.mouseLatitude.innerHTML=b},_updateClickLocation:function(a,b){this._updateMouseLocation(a,b);this.markerLongitude.innerHTML=a;this.markerLatitude.innerHTML=b},_updateGeocoordinateStringLocation:function(a,b){this.resultValue.domNode.innerHTML="\x26nbsp";this._geometryService.toGeoCoordinateString(a,e.hitch(this,function(a){clearTimeout(this._calcTimer);
a?(this.resultValue.domNode.innerHTML=a,this.onMeasureEnd(this.activeTool,b,a,this.getUnit())):(this.resultValue.domNode.innerHTML=this._gsErrorMsg,this.onMeasureEnd(this.activeTool,null,null,this.getUnit()))}));clearTimeout(this._calcTimer);this._calcTimer=setTimeout(e.hitch(this,function(){this.resultValue.domNode.innerHTML=this._calculatingMsg},1E3))},_switchLocationUnit:function(a){var b,d;f.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);this.currentLocationUnit=a;c.disconnect(this._mouseMoveMapHandler);
this._mouseMoveMapHandler=null;this.onUnitChange(this._unitStrings[a],this.activeTool);"esriDegreeMinuteSeconds"===a||"esriDecimalDegrees"===a?(this._mouseMoveMapHandler=c.connect(this._map,"onMouseMove",this,"_locationMoveHandler"),this._toggleLocationResultsTable(!0,!1),this._locationGraphic&&this._calculateLocation(this._locationGraphic.geometry,!0)):(this._toggleLocationResultsTable(!1,!1),null===this.resultValue||null===this.markerLocationX&&null===this.markerLocationY||(b=this.markerLocationX,
d=this.markerLocationY,this._locationGraphic&&this._updateGeocoordinateStringLocation({coordinates:[[b,d]],sr:{wkid:4326},conversionType:this._unitStrings[a]},this._locationGraphic.geometry)))},_toggleLocationResultsTable:function(a,b){b&&(this.resultValue.innerHTML="\x26nbsp",this.markerLongitude.innerHTML="---",this.markerLatitude.innerHTML="---",this.mouseLongitude.innerHTML="---",this.mouseLatitude.innerHTML="---");a?(w.show(this.resultTable.domNode),w.hide(this.resultValueContainer.domNode)):
(w.hide(this.resultTable.domNode),w.show(this.resultValueContainer.domNode),c.disconnect(this._mouseMoveMapHandler));"PCS"===this._map.cs&&w.hide(this._mouseRow)},_setupDistanceTool:function(){this._map.navigationManager.setImmediateClick(!0);"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=c.connect(this._map,"onExtentChange",this,"_projectMapExtent"));this._inputPoints=[];this._createDistanceUnitList();this._mouseClickMapHandler=c.connect(this._map,"onClick",
this,"_measureDistanceMouseClickHandler");this._doubleClickMapHandler=c.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler")},_distanceButtonToggle:function(){this.clearResult();this.setTool("distance")},_measureCustomDistance:function(){1<this._userGeometry.paths[0].length&&(this.setTool("distance",!0),this._inputPoints=[],g.forEach(this._userGeometry.paths[0],e.hitch(this,function(a,b){this._inputPoints.push(a);var d=new l(new F(a[0],a[1],this._userGeometry.spatialReference),this._pointSymbol);
this._measureGraphics.push(d);this._map.graphics.add(d);0!==b&&(this.result+=this._geodesicDistance(a,this._userGeometry.paths[0][b-1]))})),this._measureGraphic=new l,this._measureGraphic.setSymbol(this._lineSymbol),this._measureGraphics.push(this._measureGraphic),this._userGeometry=this._densifyGeometry(this._userGeometry),this._measureGraphic.setGeometry(this._userGeometry),this._map.graphics.add(this._measureGraphic),this._showDistance(this.result),this._inputPoints=[],this.onMeasureEnd(this.activeTool,
this._userGeometry,this.result,this.getUnit()))},_showDistance:function(a){a&&this._outputResult(a,f.byNode(this._unitDropDown.domNode).label)},_setupAreaTool:function(){this._map.navigationManager.setImmediateClick(!0);this._inputPoints=[];this._createAreaUnitList();this._tempGraphic=new l;this._tempGraphic.setSymbol(this._areaLineSymbol);this._tempGraphic.setGeometry(new m(this._map.spatialReference));this._map.graphics.add(this._tempGraphic);"PCS"===this._map.cs&&(this._geometryAreaHandler=c.connect(this._geometryService,
"onAreasAndLengthsComplete",this,"_outputArea"));this._mouseClickMapHandler=c.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");this._doubleClickMapHandler=c.connect(this._map,"onDblClick",this,"_measureAreaDblClickHandler")},_areaButtonToggle:function(){this.clearResult();this.setTool("area")},_generatePolygonFromPaths:function(){var a=[];g.forEach(this._polylineGraphics,e.hitch(this,function(b){g.forEach(b.geometry.paths,e.hitch(this,function(b){g.forEach(b,e.hitch(this,function(b){a.push(b)}))}))}));
a.push(a[0]);var b=new C(this._map.spatialReference);b.addRing(a);var b=this._densifyGeometry(b),d=new l;d.setGeometry(b);d.setSymbol(this._borderlessFillSymbol);this._measureGraphic=d;this._measureGraphics.push(d);return d},_getArea:function(a){var b=[],d=new L;d.areaUnit=N.UNIT_ACRES;d.calculationType="geodesic";C.prototype.isSelfIntersecting(a)?this._geometryService.simplify([a],e.hitch(this,function(a){g.forEach(a,e.hitch(this,function(c){"PCS"===this._map.cs?(d.polygons=a,this._geometryService.areasAndLengths(d)):
("Web Mercator"===this._map.cs&&(c=v.webMercatorToGeographic(c)),b.push(c))}));var c=B.geodesicAreas(b,y.ACRES);this._showArea(c[0])})):("Web Mercator"===this._map.cs&&(a=v.webMercatorToGeographic(a)),b.push(a),"PCS"===this._map.cs?(d.polygons=b,this._geometryService.areasAndLengths(d)):(a=B.geodesicAreas(b,y.ACRES),this._showArea(Math.abs(a[0]))))},_outputArea:function(a){this._showArea(Math.abs(a.areas[0]))},_showArea:function(a){if(a)if(this.result=a,a=f.byNode(this._unitDropDown.domNode).label,
a=this._outputResult(this.result,a),this._mouseMoveMapHandler)this.onMeasure(this.activeTool,this._measureGraphic.geometry,a,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,this._measureGraphic.geometry,a,this.getUnit())},_measureCustomArea:function(){this.setTool("area",!0);this._inputPoints=[];var a=this._densifyGeometry(this._userGeometry);this._measureGraphic=new l;this._measureGraphic.setGeometry(a);this._measureGraphic.setSymbol(this._fillSymbol);this._measureGraphics.push(this._measureGraphic);
this._map.graphics.add(this._measureGraphic);this._getArea(a);this._inputPoints=[]},_resetToolState:function(){var a=this._map;a.navigationManager.setImmediateClick(!1);this._dblClickZoom&&a.enableDoubleClickZoom();this._inputPoints=[];c.disconnect(this._mouseClickMapHandler);c.disconnect(this._mouseMoveMapHandler);c.disconnect(this._doubleClickMapHandler);c.disconnect(this._mouseDragMapHandler);c.disconnect(this._clickMapHandler);c.disconnect(this._mapExtentChangeHandler);c.disconnect(this._geometryAreaHandler);
this._mouseClickMapHandler=this._mouseMoveMapHandler=this._doubleClickMapHandler=this._mouseDragMapHandler=this._clickMapHandler=this._mapExtentChangeHandler=this._geometryAreaHandler=null;a.snappingManager&&a.snappingManager._snappingGraphic&&a.graphics.remove(a.snappingManager._snappingGraphic);this._map.snappingManager&&(this._map.snappingManager._stopSelectionLayerQuery(),this._map.snappingManager._killOffSnapping());this._unitDropDown._opened&&this._unitDropDown.closeDropDown()},_measureCustomGeometry:function(){this.clearResult();
switch(this._userGeometry.type){case "point":this._measureCustomPoint();break;case "polyline":this._measureCustomDistance();break;case "polygon":this._measureCustomArea()}},_densifyGeometry:function(a){"Web Mercator"===this._map.cs&&(a=v.webMercatorToGeographic(a));a="PCS"===this._map.cs?a:B.geodesicDensify(a,5E5);"Web Mercator"===this._map.cs&&(a=v.geographicToWebMercator(a));return a},_geodesicDistance:function(a,b){var d=new m(this._map.spatialReference);"PCS"===this._map.cs&&(a=this._getGCSLocation(a),
b=this._getGCSLocation(b));d.addPath([a,b]);"Web Mercator"===this._map.cs&&(d=v.webMercatorToGeographic(d));return B.geodesicLengths([d],y.MILES)[0]},_calculateXY:function(a,b){var d=t.widgets.measurement,h=this._map.getScale(),c,e;if(this.getUnit()===d.NLS_decimal_degrees)e=500<=h?6:500>h&&50<=h?7:50>h&&5<=h?8:9,c=a.toFixed(e),e=b.toFixed(e),e=this._roundY(e),this._map.spatialReference._isWrappable()||(c=this._roundX(c));else if(this.getUnit()===d.NLS_deg_min_sec){var f=d=!1,k,A,g,r;e=9E4<=h?0:9E4>
h&&9E3<=h?1:9E3>h&&900<=h?2:900>h&&90<h?3:4;0>a&&(d=!0,a=Math.abs(a));0>b&&(f=!0,b=Math.abs(b));b=this._roundY(b);this._map.spatialReference._isWrappable()||(a=this._roundX(a));k=Math.floor(b)+"\u00b0";c=Math.floor(a)+"\u00b0";A=Math.floor(60*(b-Math.floor(b)))+"'";h=Math.floor(60*(a-Math.floor(a)))+"'";g=(60*(60*(b-Math.floor(b))-Math.floor(60*(b-Math.floor(b))))).toFixed(e)+'"';r=(60*(60*(a-Math.floor(a))-Math.floor(60*(a-Math.floor(a))))).toFixed(e)+'"';e=k+A+g;c=c+h+r;d&&(c="-"+c);f&&(e="-"+e)}return[c,
e]},_roundY:function(a){90<a?a=90:-90>a&&(a=-90);return a},_roundX:function(a){180<a?a=180:-180>a&&(a=-180);return a},_getGCSLocation:function(a){a=e.clone(a);if("Web Mercator"===this._map.cs)a=v.webMercatorToGeographic(a);else if("PCS"===this._map.cs){if(this._map._newExtent){var b=Math.abs((this._map._newExtent.xmax-this._map._newExtent.xmin)/(this._map.extent.xmax-this._map.extent.xmin)),d=Math.abs((this._map._newExtent.ymax-this._map._newExtent.ymin)/(this._map.extent.ymax-this._map.extent.ymin));
a=new F((a.x-this._map.extent.xmin)*b+this._map._newExtent.xmin,(a.y-this._map.extent.ymin)*d+this._map._newExtent.ymin,this._map.spatialReference)}}else a=a.normalize();return a},_projectMapExtent:function(a){a=new l(a);var b=new G({wkid:4326});this._geometryService.project([a.geometry],b,e.hitch(this,function(a){if(!this._mouseMoveMapHandler&&"location"===this.activeTool){if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=
c.connect(this._map,"onMouseMove",e.hitch(this,this._locationMoveHandler));this._mouseMoveMapHandler=c.connect(this._map,"onMouseMove",e.hitch(this,this._locationMoveHandler))}this._map._newExtent=a[0]}))},_checkCS:function(a){if(a.wkid)return 3857===a.wkid||102100===a.wkid||102113===a.wkid?"Web Mercator":P.isDefined(Q[a.wkid])?"PCS":"GCS";if(a.wkt)return-1!==a.wkt.indexOf("WGS_1984_Web_Mercator")?"Web Mercator":0===a.wkt.indexOf("PROJCS")?"PCS":"GCS"},_switchUnit:function(a){"distance"===this.activeTool?
this.currentDistanceUnit=a:"area"===this.activeTool?this.currentAreaUnit=a:"location"===this.activeTool&&(this.currentLocationUnit=a);f.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);if(null!==this.result){var b=this._outputResult(this.result,this._unitStrings[a]);this.onUnitChange(this._unitStrings[a],this.activeTool);if(null!==this._measureGraphic)if(this._mouseMoveMapHandler)this.onMeasure(this.activeTool,this._measureGraphic.geometry,b,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,
this._measureGraphic.geometry,b,this.getUnit())}},_setupDictionaries:function(){var a=t.widgets.measurement;this._unitDictionary[a.NLS_length_miles]=1;this._unitDictionary[a.NLS_length_kilometers]=1.609344;this._unitDictionary[a.NLS_length_feet]=5280;this._unitDictionary[a.NLS_length_meters]=1609.34;this._unitDictionary[a.NLS_length_yards]=1760;this._unitDictionary[a.NLS_length_nautical_miles]=0.869;this._unitDictionary[a.NLS_area_acres]=1;this._unitDictionary[a.NLS_area_sq_kilometers]=0.004047;this._unitDictionary[a.NLS_area_sq_miles]=
0.0015625;this._unitDictionary[a.NLS_area_sq_feet]=43560;this._unitDictionary[a.NLS_area_sq_meters]=4046.87;this._unitDictionary[a.NLS_area_hectares]=0.4047;this._unitDictionary[a.NLS_area_sq_yards]=4840;this._unitDictionary[a.NLS_area_sq_nautical_miles]=0.001179874545293396;this._unitStrings={esriMiles:a.NLS_length_miles,esriKilometers:a.NLS_length_kilometers,esriFeet:a.NLS_length_feet,esriMeters:a.NLS_length_meters,esriYards:a.NLS_length_yards,esriNauticalMiles:a.NLS_length_nautical_miles,esriAcres:a.NLS_area_acres,
esriSquareKilometers:a.NLS_area_sq_kilometers,esriSquareMiles:a.NLS_area_sq_miles,esriSquareFeet:a.NLS_area_sq_feet,esriSquareMeters:a.NLS_area_sq_meters,esriHectares:a.NLS_area_hectares,esriSquareYards:a.NLS_area_sq_yards,esriSquareNauticalMiles:a.NLS_area_sq_nautical_miles,esriDecimalDegrees:a.NLS_decimal_degrees,esriDegreeMinuteSeconds:a.NLS_deg_min_sec,esriMGRS:a.NLS_MGRS,esriUSNG:a.NLS_USNG,esriUTM:a.NLS_UTM,esriDDM:a.NLS_DDM,esriDD:a.NLS_DD,esriGARS:a.NLS_GARS,esriGeoRef:a.NLS_GeoRef};this._locationUnitStrings=
[a.NLS_decimal_degrees,a.NLS_deg_min_sec,a.NLS_MGRS,a.NLS_USNG,a.NLS_UTM,a.NLS_GeoRef,a.NLS_GARS];this._locationUnitStringsLong="esriDecimalDegrees esriDegreeMinuteSeconds esriMGRS esriUSNG esriUTM esriGeoRef esriGARS".split(" ");this._distanceUnitStrings=[a.NLS_length_miles,a.NLS_length_kilometers,a.NLS_length_feet,a.NLS_length_meters,a.NLS_length_yards,a.NLS_length_nautical_miles];this._distanceUnitStringsLong="esriMiles esriKilometers esriFeet esriMeters esriYards esriNauticalMiles".split(" ");
this._areaUnitStrings=[a.NLS_area_acres,a.NLS_area_sq_miles,a.NLS_area_sq_kilometers,a.NLS_area_hectares,a.NLS_area_sq_yards,a.NLS_area_sq_feet,a.NLS_area_sq_meters];this._areaUnitStringsLong="esriAcres esriSquareMiles esriSquareKilometers esriHectares esriSquareYards esriSquareFeet esriSquareMeters".split(" ");this._buttonDijits={area:this._areaButton,distance:this._distanceButton,location:this._locationButton};f.byNode(this._distanceButton.domNode).setLabel(a.NLS_distance);f.byNode(this._areaButton.domNode).setLabel(a.NLS_area);
f.byNode(this._locationButton.domNode).setLabel(a.NLS_location);f.byNode(this.resultLabel.domNode).setContent(a.NLS_resultLabel)},onToolChange:function(){},onUnitChange:function(){},onMeasureStart:function(){},onMeasure:function(){},onMeasureEnd:function(){},_measureAreaMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);b=b||a.mapPoint;this._inputPoints.push(b);this._currentStartPt=b;if(1===this._inputPoints.length){this._tempGraphic.setGeometry(new m(this._map.spatialReference));
for(a=0;a<this._measureGraphics.length;a++)this._map.graphics.remove(this._measureGraphics[a]);this._measureGraphics=[];this.result=0;this._outputResult(this.result,t.widgets.measurement.NLS_area_acres);this._mouseMoveMapHandler=c.connect(this._map,"onMouseMove",this,"_measureAreaMouseMoveHandler");this.onMeasureStart(this.activeTool,this.getUnit())}this._measureGraphic=new l;this._measureGraphic.setSymbol(this._areaLineSymbol);this._measureGraphics.push(this._measureGraphic);if(1<this._inputPoints.length){var d=
new m(this._map.spatialReference);d.addPath([this._inputPoints[this._inputPoints.length-2],b]);a=new m(this._map.spatialReference);a.addPath([this._inputPoints[0],b]);b=this._densifyGeometry(d);a=this._densifyGeometry(a);this._tempGraphic.setGeometry(a);this._measureGraphic.setGeometry(b);this._polylineGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);if(2<this._inputPoints.length){b=new C(this._map.spatialReference);d=[];for(a=0;a<this._inputPoints.length;a++)d.push([this._inputPoints[a].x,
this._inputPoints[a].y]);d.push([this._inputPoints[0].x,this._inputPoints[0].y]);b.addRing(d);this._polygonGraphic?(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic),this._measureGraphic=this._polygonGraphic,this._polylineGraphics.pop()):(this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(b)}}else this._polygonGraphic&&
(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null)},_measureAreaMouseMoveHandler:function(a){var b;if(0<this._inputPoints.length){var d=new m(this._map.spatialReference),c;this._map.snappingManager&&(c=this._map.snappingManager._snappingPoint);b=c||a.mapPoint;d.addPath([this._currentStartPt,b]);a=this._densifyGeometry(d);this._tempGraphic.setGeometry(a)}1<this._inputPoints.length&&(a=new m(this._map.spatialReference),a.addPath([b,this._inputPoints[0]]),b=this._densifyGeometry(a),
this._tempGraphic.setGeometry(this._tempGraphic.geometry.addPath(b.paths[0])))},_measureAreaDblClickHandler:function(a){c.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&k("ios")&&this._measureAreaMouseClickHandler(a);a=new C(this._map.spatialReference);var b=[],d;for(d=0;d<this._inputPoints.length;d++)b.push([this._inputPoints[d].x,this._inputPoints[d].y]);b.push([this._inputPoints[0].x,this._inputPoints[0].y]);a.addRing(b);this._inputPoints=
[];this.measureGeometry=this._densifyGeometry(a);this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(a);this._polylineGraphics=[]},_measureDistanceMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._inputPoints.push(a);this._currentStartPt=a;if(1===
this._inputPoints.length){for(b=0;b<this._measureGraphics.length;b++)this._map.graphics.remove(this._measureGraphics[b]);this._map.graphics.remove(this._tempGraphic);this._measureGraphics=[];this.result=0;this._outputResult(this.result,t.widgets.measurement.NLS_length_miles);this._tempGraphic=new l;this._tempGraphic.setSymbol(this._lineSymbol);this._map.graphics.add(this._tempGraphic);this._mouseMoveMapHandler=c.connect(this._map,"onMouseMove",this,"_measureDistanceMouseMoveHandler");this.onMeasureStart(this.activeTool,
this.getUnit())}this._tempGraphic.setGeometry(new m(this._map.spatialReference));b=new l;b.setSymbol(this._pointSymbol);b.setGeometry(a);this._measureGraphics.push(b);this._map.graphics.add(b);if(1<this._inputPoints.length)if(this._measureGraphic=new l,this._measureGraphic.setSymbol(this._lineSymbol),this._measureGraphics.push(this._measureGraphic),b=new m(this._map.spatialReference),b.addPath([this._inputPoints[this._inputPoints.length-2],a]),b=this._densifyGeometry(b),this._measureGraphic.setGeometry(b),
this._map.graphics.add(this._measureGraphic),"PCS"===this._map.cs)this._geometryServiceLength(b,!1);else{b=this._geodesicDistance(this._inputPoints[this._inputPoints.length-2],a);var d=this._outputResult(b,this.getUnit());this.result+=b;this._showDistance(this.result);this.onMeasure(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit(),d)}else b.setSymbol(this._pointSymbol)},_measureDistanceMouseMoveHandler:function(a){if(0<this._inputPoints.length){var b,d=new m(this._map.spatialReference);
this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;d.addPath([this._currentStartPt,a]);d=this._densifyGeometry(d);this._tempGraphic.setGeometry(d);"PCS"!==this._map.cs&&(b=this._geodesicDistance(this._currentStartPt,a),d=this._outputResult(b,this.getUnit()),b+=this.result,this._showDistance(b),this.onMeasure(this.activeTool,a,this._outputResult(b,this.getUnit()),this.getUnit(),d))}},_measureDistanceDblClickHandler:function(a){c.disconnect(this._mouseMoveMapHandler);
this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&k("ios")&&this._measureDistanceMouseClickHandler(a);a=new m(this._map.spatialReference);a.addPath(this._inputPoints);a=this._densifyGeometry(a);this._measureGraphic.geometry=a;"PCS"===this._map.cs?this._geometryServiceLength(a,!0):(this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit()))},_geometryServiceLength:function(a,b){var d=new M;d.polylines=[a];d.lengthUnit=
9093;d.calculationType="geodesic";this._geometryService.lengths(d,e.hitch(this,function(d){d=d.lengths[0];if(b)this.result=d,this._showDistance(this.result),this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit());else{var c=this._outputResult(d,this.getUnit());this.result+=d;this._showDistance(this.result);this.onMeasure(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit(),c)}}))},_locationClickHandler:function(a){var b;
this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._locationButtonToggle();this._locationGraphic=new l;this._locationGraphic.setGeometry(a);this._locationGraphic.setSymbol(this._pointSymbol);this._map.graphics.add(this._locationGraphic);this._measureGraphics.push(this._locationGraphic);this._calculateLocation(a,!0)},_locationMoveHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);this._calculateLocation(b||a.mapPoint,
!1)},_outputResult:function(a,b){var d=a*this._unitDictionary[b];0===d?f.byNode(this.resultValue.domNode).set("content","\x26nbsp"):1E6<d?f.byNode(this.resultValue.domNode).set("content",q.format(d.toPrecision(9),{pattern:this.numberPattern})+" "+b):10>d?f.byNode(this.resultValue.domNode).set("content",q.format(d.toFixed(2),{pattern:this.numberPattern+"0"})+" "+b):f.byNode(this.resultValue.domNode).set("content",q.format(d.toFixed(2),{pattern:this.numberPattern})+" "+b);return d},_createDistanceUnitList:function(){var a,
b=new D({style:"display: none;"});g.forEach(this._distanceUnitStrings,e.hitch(this,function(a,c){var f=new E({label:a,onClick:e.hitch(this,function(){this._switchUnit(this._distanceUnitStringsLong[c])})});f.set("class","unitDropDown");b.addChild(f)}));f.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentDistanceUnit?(a=this._unitStrings[this.currentDistanceUnit],f.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultDistanceUnit],f.byNode(this._unitDropDown.domNode).set("label",
a),this.currentDistanceUnit=this._defaultDistanceUnit)},_createAreaUnitList:function(){var a,b=new D({style:"display: none;"});g.forEach(this._areaUnitStrings,e.hitch(this,function(a,c){var f=new E({label:a,onClick:e.hitch(this,function(){this._switchUnit(this._areaUnitStringsLong[c])})});f.set("class","unitDropDown");b.addChild(f)}));f.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentAreaUnit?(a=this._unitStrings[this.currentAreaUnit],f.byNode(this._unitDropDown.domNode).set("label",
a)):(a=this._unitStrings[this._defaultAreaUnit],f.byNode(this._unitDropDown.domNode).set("label",a),this.currentAreaUnit=this._defaultAreaUnit)},_createLocationUnitList:function(){var a;a=this._locationUnitStrings;var b=new D({style:"display: none;"});if(null===this._geometryService||!1===this.advancedLocationUnits)a=a.slice(0,2);g.forEach(a,e.hitch(this,function(a,c){var f=new E({label:a,onClick:e.hitch(this,function(){this._switchLocationUnit(this._locationUnitStringsLong[c])})});f.set("class",
"unitDropDown");b.addChild(f)}));f.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentLocationUnit||(this.currentLocationUnit=this._defaultLocationUnit);a=this._unitStrings[this.currentLocationUnit];f.byNode(this._unitDropDown.domNode).set("label",a);("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)&&this._toggleLocationResultsTable(!0,!1)},_drawPointGraphics:function(a){var b,d,c;d=this._pointSymbol;a=x.create("div",{"class":"esriLocationResultSymbol"},
a);a=A.createSurface(a,10,10);9>k("ie")&&(b=a.getEventSource(),s.set(b,"position","relative"),s.set(b.parentNode,"position","relative"));d=d.getShapeDescriptors();try{c=a.createShape(d.defaultShape).setFill(d.fill).setStroke(d.stroke)}catch(f){a.clear();a.destroy();return}var g=c.getBoundingBox();d=g.width;b=g.height;var r=-(g.x+d/2),g=-(g.y+b/2);a=a.getDimensions();a={dx:r+a.width/2,dy:g+a.height/2};if(10<d||10<b)d=5/(d/10>b/10?d:b),e.mixin(a,{xx:d,yy:d});c.applyTransform(a)}})})},"esri/tasks/AreasAndLengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),
function(n,p,e,g,c,u){return n(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var c=e.map(this.polygons,function(c){return c.toJson()}),k={};k.polygons=g.toJson(c);c=this.polygons[0].spatialReference;k.sr=c.wkid?c.wkid:g.toJson(c.toJson());this.lengthUnit&&(k.lengthUnit=this.lengthUnit);this.areaUnit&&(p.isString(this.areaUnit)?k.areaUnit=g.toJson({areaUnit:this.areaUnit}):k.areaUnit=this.areaUnit);this.calculationType&&
(k.calculationType=this.calculationType);return k}})})},"esri/tasks/LengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(n,p,e,g,c,u){return n(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var c=e.map(this.polylines,function(c){return c.toJson()}),k={};k.polylines=g.toJson(c);c=this.polylines[0].spatialReference;k.sr=
c.wkid?c.wkid:g.toJson(c.toJson());this.lengthUnit&&(k.lengthUnit=this.lengthUnit);this.geodesic&&(k.geodesic=this.geodesic);this.calculationType&&(k.calculationType=this.calculationType);return k}})})},"widgets/Measurement/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/i18n!./nls/strings","dojo/text!./config.json"],function(){})},"url:esri/dijit/templates/Measurement.html":"\x3cdiv class\x3d\"esriMeasurement\"\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' class\x3d'esriMeasurementButtonContainer'\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_areaButton' iconClass\x3d'areaIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_areaButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_distanceButton' iconClass\x3d'distanceIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_distanceButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_locationButton' iconClass\x3d'locationIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_locationButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d\"esriMeasurementSeparator\"\x3e|\x3c/div\x3e\r\n    \x3cbutton dojoType\x3d'dijit.form.DropDownButton' baseClass\x3d'esriToggleButton' dojoAttachPoint\x3d'_unitDropDown' label\x3d'unit' value\x3d'unit' style\x3d'visibility:hidden;'\x3e\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultLabel' class\x3d'resultLabel esriMeasurementResultLabel'\x3e\x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValueContainer' align\x3d'leading' class\x3d\"esriMeasurementResultValue\"\x3e\r\n    \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValue' class\x3d'result'\x3e\x26nbsp;\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultTable' align\x3d'leading' class\x3d\"resultTable esriMeasurementTableContainer\" style\x3d\"display:none;\"\x3e\r\n    \x3ctable class\x3d\"esriMeasurementResultTable\"\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableHeader\" colspan\x3d\"2\"\x3e${_NLS_Lon}\x3c/td\x3e\x3ctd class\x3d\"esriMeasurementTableHeader\"\x3e${_NLS_Lat}\x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\" dojoAttachPoint\x3d\"_mouseRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"mouseCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"pinCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:widgets/Measurement/Widget.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"measurementDiv"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n',"url:widgets/Measurement/config.json":'{\r\n  "measurement": {}\r\n}',"*now":function(n){n(['dojo/i18n!*preload*widgets/Measurement/nls/Widget*["ar","cs","da","de","en","el","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dijit/_WidgetsInTemplateMixin jimu/BaseWidget jimu/portalUtils jimu/dijit/Message esri/units esri/dijit/Measurement esri/symbols/jsonUtils".split(" "),function(n,p,e,g,c,u,r,k,q,s,x){return n([u,c],{name:"Measurement",measurement:null,_pcDef:null,startup:function(){if(!this.measurement&&!this._pcDef){this.inherited(arguments);var c=this.config.measurement;c.map=this.map;c.lineSymbol&&(c.lineSymbol=x.fromJson(c.lineSymbol));c.pointSymbol&&
(c.pointSymbol=x.fromJson(c.pointSymbol));this._processConfig(c).then(p.hitch(this,function(c){this.measurement=new s(c,this.measurementDiv);this.own(e.after(this.measurement,"setTool",p.hitch(this,function(){this.measurement.activeTool?this.disableWebMapPopup():this.enableWebMapPopup()})));this.measurement.startup()}),p.hitch(this,function(c){new k({message:c.message||c})}))}},_processConfig:function(c){this._pcDef=new g;c.defaultLengthUnit&&c.defaultAreaUnit?this._pcDef.resolve(c):r.getUnits(this.appConfig.portalUrl).then(p.hitch(this,
function(e){c.defaultAreaUnit="english"===e?q.SQUARE_MILES:q.SQUARE_KILOMETERS;c.defaultLengthUnit="english"===e?q.MILES:q.KILOMETERS;this._pcDef.resolve(c)}),p.hitch(this,function(e){console.error(e);c.defaultAreaUnit=q.SQUARE_MILES;c.defaultLengthUnit=q.MILES;this._pcDef.resolve(c)}));return this._pcDef.promise},disableWebMapPopup:function(){this.map.setInfoWindowOnClick(!1)},enableWebMapPopup:function(){this.map.setInfoWindowOnClick(!0)},onDeActive:function(){this.onClose()},onClose:function(){this.measurement&&
this.measurement.activeTool&&(this.measurement.clearResult(),this.measurement.setTool(this.measurement.activeTool,!1))},destroy:function(){this.measurement&&this.measurement.destroy();this.inherited(arguments)}})});