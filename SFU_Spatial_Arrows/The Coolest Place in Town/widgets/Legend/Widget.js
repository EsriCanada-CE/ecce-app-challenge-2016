// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Legend/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings","dojo/text!./config.json"],function(){})},"url:widgets/Legend/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"legendDiv"\x3e\x3c/div\x3e\r\n  \x3cdiv style\x3d"display:none" data-dojo-attach-point\x3d"removedDiv"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n',"url:widgets/Legend/css/style.css":".esriLegendServiceLabel {font-size: 14px;}.esriLegendLayer{font-size: 12px;}",
"url:widgets/Legend/config.json":'{\r\n  "legend":{\r\n    "arrangement": 0,\r\n    "autoUpdate": true,\r\n    "respectCurrentMapScale": true\r\n  }\r\n}',"*now":function(c){c(['dojo/i18n!*preload*widgets/Legend/nls/Widget*["ar","cs","da","de","en","el","es","et","fi","fr","he","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom dojo/on dojo/aspect dijit/_WidgetsInTemplateMixin jimu/BaseWidget jimu/LayerInfos/LayerInfos jimu/dijit/Message esri/dijit/Legend".split(" "),function(c,e,d,f,g,h,k,l,m,n,p){return c([l,k],{name:"Legend",baseClass:"jimu-widget-legend",layerInfos:[],legend:null,startup:function(){this.inherited(arguments);m.getInstance(this.map,this.map.itemInfo).then(d.hitch(this,function(a){this.config.legend.map=this.map;this.legend=new p(this.config.legend,
this.legendDiv);this.legend.startup();this.removeLegendOfBasemap();this.legend&&this.legend._createLegend&&h.after(this.legend,"_createLegend",d.hitch(this,"removeLegendOfBasemap"));this.own(g(a,"layerInfosIsShowInMapChanged",d.hitch(this,"onLayersVisibilityChange")))}),d.hitch(this,function(a){console.error(a);new n({message:a.message||a})}))},onLayersVisibilityChange:function(){this.legend.refresh()},_getInvalidLegendLayer:function(){var a=[],c=this.map.getBasemap();this.map.itemInfo&&this.map.itemInfo.itemData?
(e.forEach(this.map.itemInfo.itemData.baseMap.baseMapLayers,function(b){a.push(b.id)}),e.forEach(this.map.itemInfo.itemData.operationalLayers,function(b){!1===b.showLegend&&a.push(b.id)}),e.forEach(this.map.layerIds,d.hitch(this,function(b){this.map.getLayer(b)._basemapGalleryLayerType&&a.push(b)}))):e.forEach(this.map.layerIds,d.hitch(this,function(b){this.map.getLayer(b).isOperationalLayer||a.push(b)}));c&&a.push(c);return a},removeLegendOfBasemap:function(){e.forEach(this._getInvalidLegendLayer(),
function(a){(a=f.byId(this.legend.id+"_"+a))&&1===a.nodeType&&this.removedDiv.appendChild(a)},this)}})});