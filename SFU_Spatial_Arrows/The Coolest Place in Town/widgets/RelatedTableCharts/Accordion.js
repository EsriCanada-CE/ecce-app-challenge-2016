// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dijit/_WidgetBase dojo/_base/declare dojo/Evented dojo/_base/array dojo/_base/lang dojo/on dojo/query dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-attr ./ChartLayout jimu/utils".split(" "),function(p,q,r,n,l,s,e,h,b,t,u,v,w){return q([p,r],{openPanels:[],chartArray:[],constructor:function(){},postCreate:function(){this.inherited(arguments)},initAccordionPane:function(){var a,f;(this.config.charts.highlightedChartIndex||0===this.config.charts.highlightedChartIndex)&&-1===n.indexOf(this.openPanels,
"Chart"+this.config.charts.highlightedChartIndex)&&this.openPanels.push("Chart"+this.config.charts.highlightedChartIndex);a=h.create("div",{"class":"esriCTAccordionWrapper"},this.node);this.chartArray=[];n.forEach(this.config.charts,l.hitch(this,function(g,c){var d,k,e,m;m="Chart"+c;e=h.create("div",{"class":"esriCTChartRow",chartIndex:m},a);d=w.sanitizeHTML(g.chartConfig.sectionTitle);d=h.create("div",{"class":"esriCTChartTitle",innerHTML:d,title:d},e);k=h.create("div",{"class":"esriCTChartContent"},
e);g.chartData?(f=new v({nls:this.nls,config:g},h.create("div",{},k)),f.onChartCreated=l.hitch(this,function(){this.openPanels.length?-1===this.openPanels.indexOf(m)&&b.add(k,"esriCTHidden"):0!==c&&b.add(k,"esriCTHidden")}),this.chartArray.push(f),f.startup(),s(d,"click",l.hitch(this,function(a){b.contains(a.currentTarget,"esriCTChartSelected")?b.contains(a.currentTarget,"esriCTChartHighlighted")?this._toggleSelectedChart(a.currentTarget,!0):(this.config.charts.highlightedChartIndex=c,this._highlightChart(a.currentTarget,
c)):(this.config.charts.highlightedChartIndex=c,this._toggleSelectedChart(a.currentTarget,!1))}))):(this.chartArray.push(null),b.add(e,"esriCTDisabledRow"),b.add(k,"esriCTHidden"));-1!==this.openPanels.indexOf(m)&&this._toggleSelectedChart(d,!1);0===c&&!this.openPanels.length&&(this.config.charts.highlightedChartIndex=c,this._toggleSelectedChart(d,!1))}))},_toggleSelectedChart:function(a,f){var g,c,d;g=e(".esriCTChartContent",a.parentElement)[0];c=u.get(a.parentElement,"chartIndex");d=c.split("Chart")[1];
f?(b.add(g,"esriCTHidden"),b.remove(a,"esriCTChartSelected"),-1!==this.openPanels.indexOf(c)&&this.openPanels.splice(this.openPanels.indexOf(c),1)):(this.config.charts[d].chartData&&(b.remove(g,"esriCTHidden"),b.add(a,"esriCTChartSelected"),this.chartArray[d]&&this.chartArray[d].resize(0),this.config.charts.highlightedChartIndex===parseInt(d,10)&&this._highlightChart(a,d)),-1===this.openPanels.indexOf(c)&&this.openPanels.push(c))},_highlightChart:function(a,f){this.emit("chartSelected",f);e(".esriCTChartHighlighted").length&&
(b.remove(e(".esriCTChartHighlighted")[0],"esriCTSelectedChartBorder"),b.remove(e(".esriCTChartHighlighted")[0],"esriCTChartHighlighted"));b.add(a,"esriCTChartHighlighted");b.add(a,"esriCTSelectedChartBorder");t.set(a,"border-color",this.config.selectedThemeColor)},resizeContents:function(){n.forEach(this.chartArray,l.hitch(this,function(a,b){a&&-1!==this.openPanels.indexOf("Chart"+b)&&a.resize(300)}))}})});