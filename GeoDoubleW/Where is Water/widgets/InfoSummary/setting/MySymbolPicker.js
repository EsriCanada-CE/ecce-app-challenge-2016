// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/InfoSummary/setting/MySymbolPicker.html":'\x3cdiv class\x3d"symbolPickerContainer"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"div_symbolOptionsContainer" class\x3d"symbolOptionsContainer"\x3e\r\n    \x3cdiv class\x3d"label symbolOptionText"\x3e\r\n      ${nls.symbolOptionsText}\r\n    \x3c/div\x3e\r\n    \x3chr /\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"div_symbolOptions" class\x3d"symbolOptions"\x3e\r\n      \x3c!--Symbol Options--\x3e\r\n      \x3cdiv class\x3d"jimu-r-row padTop10"\r\n           data-dojo-attach-point\x3d"grpSymbolOptions"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"div_rdoLayerSym" class\x3d"height30"\x3e\r\n          \x3cinput name\x3d"a" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                 data-dojo-attach-point\x3d"rdoLayerSym"\r\n                 data-dojo-attach-event\x3d"onChange:_rdoLayerSymChanged"\r\n                 title\x3d"${nls.rdoLayer}" /\x3e\r\n          \x3cspan class\x3d"label"\x3e${nls.rdoLayer}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-r-row symPick" data-dojo-attach-point\x3d"layerSym"\x3e \x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpSymbolOptions"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"div_rdoEsriSym" class\x3d"height30"\x3e\r\n          \x3cinput name\x3d"a" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoEsriSym" data-dojo-attach-event\x3d"onChange:_rdoEsriSymChanged" title\x3d"${nls.rdoEsri}" /\x3e\r\n          \x3cspan class\x3d"label"\x3e${nls.rdoEsri}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"symbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker" class\x3d"jimu-r-row symPick"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"parent_div_uploadCustomSymbol"\x3e\r\n        \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpSymbolOptions"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"div_rdoCustomSym" class\x3d"rdoCustomSym"\x3e\r\n            \x3cinput name\x3d"a" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoCustomSym" data-dojo-attach-event\x3d"onChange:_rdoCustomSymChanged" title\x3d"${nls.rdoCustom}" /\x3e\r\n            \x3cspan class\x3d"label"\x3e${nls.rdoCustom}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-r-row padTop10"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"uploadCustomSymbol" class\x3d"uploadCustom"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"customSymbolPlaceholder" class\x3d"customPlaceholder"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3c!--Clustering Options--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"parent_div_clusterOptions" class\x3d"clusterOptions"\x3e\r\n        \x3chr /\x3e\r\n        \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpClusterOptions"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"div_chkCluster"\x3e\r\n            \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"chkClusterSym" title\x3d"${nls.chkCluster}" data-dojo-attach-event\x3d"onChange:_chkClusterChanged" /\x3e\r\n            \x3cspan class\x3d"label"\x3e${nls.chkCluster}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"jimu-r-row grpClusterOptions" data-dojo-attach-point\x3d"grpClusterOptions"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"div_clusterOptions" class\x3d"height30"\x3e\r\n            \x3cinput name\x3d"bb" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoCustomCluster" data-dojo-attach-event\x3d"onChange:_rdoCustomClusterChanged" title\x3d"${nls.defineClusterSymbol}" /\x3e\r\n            \x3cspan class\x3d"label"\x3e${nls.defineClusterSymbol}\x3c/span\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"clusterPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker" class\x3d"symPickers"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"jimu-r-row grpClusterOptions" data-dojo-attach-point\x3d"grpThemeClusterOptions"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"div_themeClusterOptions" class\x3d"height30"\x3e\r\n            \x3cinput name\x3d"bb" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoThemeCluster" data-dojo-attach-event\x3d"onChange:_rdoThemeClusterChanged" title\x3d"${nls.defineThemeClusterSymbol}" /\x3e\r\n            \x3cspan class\x3d"label"\x3e${nls.defineThemeClusterSymbol}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"label iconOptionsText"\x3e\r\n      ${nls.iconOptionsText}\r\n    \x3c/div\x3e\r\n    \x3chr /\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"div_iconOptions" class\x3d"iconOptions"\x3e\r\n      \x3c!--Main Panel and cluster center Icon Options--\x3e\r\n      \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpIconOptions"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"div_rdoLayerIcon" class\x3d"height30"\x3e\r\n          \x3cinput name\x3d"b" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoLayerIcon" data-dojo-attach-event\x3d"onChange:_rdoLayerIconChanged" title\x3d"${nls.rdoLayerIcon}" /\x3e\r\n          \x3cspan class\x3d"label"\x3e${nls.rdoLayerIcon}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpCustomIconOptions"\x3e\r\n        \x3cdiv class\x3d"rdoCustomSym" data-dojo-attach-point\x3d"div_rdoCustomIcon"\x3e\r\n          \x3cinput name\x3d"b" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoCustomIcon" data-dojo-attach-event\x3d"onChange:_rdoCustomIconChanged" title\x3d"${nls.rdoCustomIcon}" /\x3e\r\n          \x3cspan class\x3d"label"\x3e${nls.rdoCustomIcon}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-r-row padTop10"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"uploadCustomIcon" class\x3d"uploadCustom"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"customIconPlaceholder" class\x3d"customPlaceholder"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!--Footer--\x3e\r\n    \x3cdiv class\x3d"footer padTop20"\x3e\r\n      \x3cdiv class\x3d"jimu-btn ok" data-dojo-attach-point\x3d"btnOk"\x3e${nls.popupOk}\x3c/div\x3e\r\n      \x3cdiv class\x3d"jimu-btn cancel" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.popupCancel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cinput type\x3d"file"\r\n           accept\x3d"image/png, image/jpeg, image/bmp, image/gif"\r\n           data-dojo-attach-point\x3d"fileInput"\r\n           class\x3d"fileInput"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/html dojo/dom-style dojo/dom-construct dojo/on dojox/gfx esri/symbols/jsonUtils esri/request jimu/dijit/SymbolPicker jimu/BaseWidget jimu/utils esri/symbols/PictureMarkerSymbol dojo/text!./MySymbolPicker.html dojo/Evented jimu/dijit/SimpleTable".split(" "),function(p,q,f,c,k,l,m,n,g,w,x,r,s,t,u,v){return p([r,q,v],{templateString:u,baseClass:"jimu-widget-InfoSummary-setting",nls:null,row:null,layerInfo:null,clusteringEnabled:null,
symbolInfo:null,symbolType:"",map:null,supportsDynamic:!0,constructor:function(a){this.nls=a.nls;this.row=a.callerRow;this.layerInfo=a.layerInfo;this.renderer=a.layerInfo.renderer;this.geometryType=a.layerInfo.geometryType;this.symbolInfo=a.symbolInfo;this.map=a.map;this.ac=a.ac;this.layerId=a.value;this.supportsDynamic=a.layerInfo.supportsDynamic},postCreate:function(){this.inherited(arguments);var a=s.getTypeByGeometryType(this.geometryType);this._loadLayerSymbol();this.supportsDynamic&&this._initSymbolPicker(a);
this._initClusterSymbolPicker(a);this._addEventHandlers(a);this._initUI()},_initUI:function(){if("undefined"!==typeof this.symbolInfo){this.symbolType=this.symbolInfo.symbolType;this.clusterType=this.symbolInfo.clusterType;this.iconType=this.symbolInfo.iconType;this.clusteringEnabled=this.symbolInfo.clusteringEnabled;this.userDefinedSymbol=this.symbolInfo.userDefinedSymbol;switch(this.symbolInfo.symbolType){case "LayerSymbol":this.rdoLayerSym.set("checked",!0);this._rdoEsriSymChanged(!1);this._rdoCustomSymChanged(!1);
break;case "EsriSymbol":this.userDefinedSymbol=!0;this.rdoEsriSym.set("checked",!0);this._rdoLayerSymChanged(!1);this._rdoCustomSymChanged(!1);this.symbolPicker.showBySymbol(g.fromJson(this.symbolInfo.symbol));break;case "CustomSymbol":this.userDefinedSymbol=!0,this.rdoCustomSym.set("checked",!0),this._rdoEsriSymChanged(!1),this._rdoLayerSymChanged(!1),this._createImageDataDiv(this.symbolInfo.symbol,!0,this.customSymbolPlaceholder)}switch(this.symbolInfo.clusterType){case "ThemeCluster":this.userDefinedSymbol=
!0;this.rdoThemeCluster.set("checked",!0);this.clusterType="ThemeCluster";break;case "CustomCluster":this.userDefinedSymbol=!0,this.rdoCustomCluster.set("checked",!0),this.clusterType="CustomCluster"}switch(this.symbolInfo.iconType){case "LayerIcon":this.rdoLayerIcon.set("checked",!0);break;case "CustomIcon":this.userDefinedSymbol=!0,this.rdoCustomIcon.set("checked",!0),this.symbolInfo.icon&&this.resetIcon(this.symbolInfo.icon)}"undefined"!==typeof this.symbolInfo.clusterType&&("CustomCluster"===
this.symbolInfo.clusterType?(this.rdoCustomCluster.set("checked",!0),this.symbolInfo.clusterSymbol&&this.clusterPicker.showBySymbol(g.fromJson(this.symbolInfo.clusterSymbol))):this.rdoThemeCluster.set("checked",!0),this.userDefinedSymbol=!0);this.chkClusterSym.set("checked",this.symbolInfo.clusteringEnabled);this._chkClusterChanged(this.symbolInfo.clusteringEnabled)}else this.rdoLayerSym.set("checked",!0),this._rdoEsriSymChanged(!1),this._rdoCustomSymChanged(!1),this.chkClusterSym.set("checked",!1),
this.rdoCustomCluster.set("checked",!0),this.rdoLayerIcon.set("checked",!0),this._rdoCustomIconChanged(!1),this.symbolType="LayerSymbol",this.iconType="LayerIcon",this.userDefinedSymbol=this.clusteringEnabled=!1;if("esriGeometryPoint"!==this.geometryType||!this.supportsDynamic)k.set(this.parent_div_uploadCustomSymbol,"display","none"),this.supportsDynamic||k.set(this.div_rdoEsriSym,"display","none")},resetIcon:function(a){this.customIconPlaceholder.innerHTML="\x3cdiv\x3e\x3c/div\x3e";a=l.create("div",
{"class":"customPlaceholder",innerHTML:[a],title:this.nls.editCustomIcon});this.customIconPlaceholder.innerHTML=a.innerHTML},loadFunc:function(a){k.set(this.symbolPreview,"background-image","url("+a.href+")");k.set(this.symbolPreview,"background-repeat","no-repeat")},errorFunc:function(a){console.log("Error: ",a.message)},_addEventHandlers:function(a){"point"===a&&this.own(m(this.uploadCustomSymbol,"click",f.hitch(this,function(){this._editIcon("Symbol")})));this.own(m(this.uploadCustomIcon,"click",
f.hitch(this,function(){this._editIcon("Icon")})));this.own(m(this.btnOk,"click",f.hitch(this,function(){this._setSymbol();this.emit("ok",this.symbolInfo)})));this.own(m(this.btnCancel,"click",f.hitch(this,function(){this.emit("cancel")})))},_setSymbol:function(){var a;switch(this.symbolType){case "LayerSymbol":a=this.symbol;break;case "EsriSymbol":this.userDefinedSymbol=!0;a=this.symbolPicker.getSymbol();break;case "CustomSymbol":this.userDefinedSymbol=!0,0<this.customSymbolPlaceholder.children.length&&
(a="undefined"!==typeof this.customSymbolPlaceholder.children[0].src?new t(this.customSymbolPlaceholder.children[0].src,30,30):g.fromJson(this.symbolInfo.symbol))}var b;"LayerIcon"===this.iconType?b=a:0<this.customIconPlaceholder.children.length&&(b="undefined"!==typeof this.customIconPlaceholder.innerHTML?this.customIconPlaceholder.innerHTML:g.fromJson(this.symbolInfo.icon));this.clusteringEnabled&&"esriGeometryPoint"===this.geometryType?(this.clusterSymbol="ThemeCluster"===this.clusterType?"custom":
this.clusterPicker.getSymbol().toJson(),this.userDefinedSymbol=!0):(this.clusterSymbol=void 0,this.clusteringEnabled=!1);a&&"undefined"!==typeof a.toJson&&(a=a.toJson());this.symbolInfo={symbolType:this.symbolType,symbol:a,clusterSymbol:this.clusterSymbol,clusteringEnabled:this.clusteringEnabled,icon:b,clusterType:this.clusterType,iconType:this.iconType,renderer:this.renderer,s:0<this.customIconPlaceholder.children.length?this.customIconPlaceholder.children[0].src:0<this.layerSym.children.length?
this.layerSym.children[0].innerHTML:this.customIconPlaceholder.outerHTML,userDefinedSymbol:this.userDefinedSymbol?this.userDefinedSymbol:!1,layerId:this.layerId}},_rdoLayerSymChanged:function(a){a&&(this.symbolType="LayerSymbol");c.setStyle(this.layerSym,"display",a?"block":"none")},_rdoEsriSymChanged:function(a){a&&(this.symbolType="EsriSymbol");c.setStyle(this.symbolPicker.domNode,"display",a?"block":"none")},_rdoCustomSymChanged:function(a){a&&(this.symbolType="CustomSymbol");c.setStyle(this.uploadCustomSymbol,
"display",a?"block":"none");c.setStyle(this.customSymbolPlaceholder,"display",a?"block":"none")},_chkClusterChanged:function(a){this.clusteringEnabled=a;c.setStyle(this.grpClusterOptions,"display",a?"block":"none");c.setStyle(this.grpThemeClusterOptions,"display",a?"block":"none");a&&"undefined"===typeof this.clusterType&&(this.clusterType="CustomCluster",this.rdoCustomCluster.set("checked",!0))},_rdoThemeClusterChanged:function(a){a&&(this.clusterType="ThemeCluster")},_rdoCustomClusterChanged:function(a){a&&
(this.clusterType="CustomCluster")},_rdoLayerIconChanged:function(a){a&&(this.iconType="LayerIcon");c.setStyle(this.uploadCustomIcon,"display",!a?"block":"none");c.setStyle(this.customIconPlaceholder,"display",!a?"block":"none")},_rdoCustomIconChanged:function(a){a&&(this.iconType="CustomIcon");c.setStyle(this.uploadCustomIcon,"display",a?"block":"none");c.setStyle(this.customIconPlaceholder,"display",a?"block":"none")},_initSymbolPicker:function(a){var b="";"point"===a?b="marker":"polyline"===a?
b="line":"polygon"===a&&(b="fill");this.symbolPicker.showByType(b)},_initClusterSymbolPicker:function(a){"point"===a&&this.clusterPicker.showByType("fill");k.set(this.parent_div_clusterOptions,"display","point"===a?"block":"none")},_loadLayerSymbol:function(){if("undefined"!==typeof this.renderer){var a=this.renderer;"undefined"!==typeof a.symbol?this._createImageDataDiv(a.symbol,!0,this.layerSym):"undefined"!==typeof a.infos?this.layerSym.innerHTML=this._createCombinedImageDataDiv(a.infos,!1).innerHTML:
"undefined"!==typeof a.uniqueValueInfos?this.layerSym.innerHTML=this._createCombinedImageDataDiv(a.uniqueValueInfos,!0).innerHTML:"undefined"!==typeof a.classBreakInfos&&(this.layerSym.innerHTML=this._createCombinedImageDataDiv(a.classBreakInfos,!0).innerHTML)}},_createImageDataDiv:function(a,b,h){h=l.create("div",{"class":"imageDataGFX"},h);(b=b?g.fromJson(a):a)||(b=a);this.symbol=b;var d=a=26;b.height&&b.width&&b.height>b.width&&(d=b.width/b.height,a=26,d*=26);var e=n.createSurface(h,d,a);b=g.getShapeDescriptors(this.setSym(b,
d,a));e.createShape(b.defaultShape).setFill(b.fill).setStroke(b.stroke).applyTransform({dx:d/2,dy:a/2});return h},_createCombinedImageDataDiv:function(a){for(var b=l.create("div",{"class":"imageDataGFXMulti"},this.customSymbolPlaceholder),h=0;h<a.length;h++){var d=a[h].symbol,e=g.fromJson(d);e||(e=d);"undefined"===typeof this.symbol&&(this.symbol=e);var c=d=26;e.height&&e.width&&e.height>e.width&&(c=e.width/e.height,d=26,c*=26);var f=l.create("div",{"class":"imageDataGFX imageDataGFX2"},b),k=n.createSurface(f,
c,d),e=g.getShapeDescriptors(this.setSym(e,c,d));k.createShape(e.defaultShape).setFill(e.fill).setStroke(e.stroke).applyTransform({dx:c/2,dy:d/2});b.insertBefore(f,b.firstChild);b.appendChild(f)}return b},setSym:function(a,b,c){"undefined"!==typeof a.setWidth?("esriGeometryPoint"===this.geometryType&&a.setWidth(b),"undefined"!==typeof a.setHeight&&a.setHeight(c)):("undefined"!==typeof a.size&&20<a.size&&a.setSize(20),"undefined"!==typeof a.width&&(a.width=b),"undefined"!==typeof a.height&&(a.height=
c));return a},_editIcon:function(a){var b=new FileReader;b.onload=f.hitch(this,function(){var c,d;"Symbol"===a?(c=this.customSymbolPlaceholder,d=this.nls.editCustomSymbol):(c=this.customIconPlaceholder,d=this.nls.editCustomIcon);c.innerHTML="\x3cdiv\x3e\x3c/div\x3e";d=l.create("div",{"class":"customPlaceholder",innerHTML:['\x3cimg class\x3d"customPlaceholder" src\x3d"',b.result,'"/\x3e'].join(""),title:d});c.innerHTML=d.innerHTML});this.fileInput.onchange=f.hitch(this,function(){b.readAsDataURL(this.fileInput.files[0])});
this.fileInput.click()},destroy:function(){this.symbolInfo=null}})});