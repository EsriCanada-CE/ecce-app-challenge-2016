// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["./BaseVersionManager","./utils"],function(g,h){function f(){this.versions=[{version:"1.0",description:"The version embedded in portal 10.3 final.",upgrader:function(a){return a},compatible:!0},{version:"1.1",description:"The version embedded in online3.6, and used in developer edition 1.0.",upgrader:function(a){if(a.widgetOnScreen&&a.widgetOnScreen.panel&&"themes/FoldableTheme/panels/TitlePanel/Panel"===a.widgetOnScreen.panel.uri||"jimu/BaseWidgetPanel"===a.widgetOnScreen.panel.uri)a.widgetOnScreen.panel.uri=
"jimu/PreloadWidgetIconPanel";return a},compatible:!0},{version:"1.2",description:"The version embedded in online3.7.",upgrader:function(a){var c=0;if(a.widgetOnScreen&&a.widgetOnScreen.widgets){for(var b=!1,c=0;c<a.widgetOnScreen.widgets.length;c++)"widgets/Splash/Widget"===a.widgetOnScreen.widgets[c].uri&&(b=!0);b||a.widgetOnScreen.widgets.push({uri:"widgets/Splash/Widget",visible:!1,positionRelativeTo:"browser",version:"1.2"});b=!1;for(c=0;c<a.widgetOnScreen.widgets.length;c++)"widgets/TimeSlider/Widget"===
a.widgetOnScreen.widgets[c].uri&&(b=!0);b||a.widgetOnScreen.widgets.push({uri:"widgets/TimeSlider/Widget",visible:!1,position:{bottom:55,left:7},version:"1.2"});b=!1;for(c=0;c<a.widgetOnScreen.widgets.length;c++)"widgets/Swipe/Widget"===a.widgetOnScreen.widgets[c].uri&&(b=!0);b||a.widgetOnScreen.widgets.push({uri:"widgets/Swipe/Widget",visible:!1,position:{top:145,left:7},version:"1.2"})}return a},compatible:!0},{version:"1.3",description:"The version embedded in online3.8 \x26 online3.9.",upgrader:function(a){(function(a){h.visitElement(a,
function(a){a.positionRelativeTo&&(a.position?a.position.relativeTo=a.positionRelativeTo:a.position={relativeTo:a.positionRelativeTo},a.panel&&(a.panel.position?a.panel.position.relativeTo=a.panel.positionRelativeTo:a.panel.position={relativeTo:a.panel.positionRelativeTo}))});var b=a.widgetOnScreen;b&&(b.panel&&b.panel.positionRelativeTo)&&(b.panel.position?b.panel.position.relativeTo=b.panel.positionRelativeTo:b.panel.position={relativeTo:b.panel.positionRelativeTo});if((b=a.widgetPool)&&b.panel&&
b.panel.positionRelativeTo)b.panel.position?b.panel.position.relativeTo=b.panel.positionRelativeTo:b.panel.position={relativeTo:b.panel.positionRelativeTo}})(a);a.widgetOnScreen&&(a.widgetOnScreen.panel&&"jimu/PreloadWidgetIconPanel"===a.widgetOnScreen.panel.uri)&&(a.widgetOnScreen.panel.uri="jimu/OnScreenWidgetPanel");(function(a){if(a.widgetOnScreen&&a.widgetOnScreen.widgets&&a.theme&&"FoldableTheme"===a.theme.name){var b=null,d=null;if(b=a.widgetOnScreen.widgets[4])void 0!==b.position.top?(b={position:{left:205,
top:45}},d={position:{left:255,top:45}}):(b={position:{left:205,bottom:55}},d={position:{left:255,bottom:55}}),a.widgetOnScreen.widgets.splice(7,0,b,d)}})(a);(function(){for(var c=0,b=0,d=!1,c=0;c<a.widgetOnScreen.widgets.length;c++)if("widgets/Geocoder/Widget"===a.widgetOnScreen.widgets[c].uri){d=!0;break}for(var e=!1,b=0;b<a.widgetOnScreen.widgets.length;b++)if("widgets/Search/Widget"===a.widgetOnScreen.widgets[b].uri){e=!0;break}!e&&d&&(c=a.widgetOnScreen.widgets[c],c.uri="widgets/Search/Widget",
c.name="Search")})(a);(function(a){for(var b=0,b=a.widgetOnScreen.widgets.length-1;0<=b;b--){var d=a.widgetOnScreen.widgets[b];if("widgets/Swipe/Widget"===d.uri&&!d.closeable&&(a.widgetOnScreen.widgets.splice(b,1),!1!==d.visible)){d.closeable=!0;var e;a:{for(e=e=0;e<a.widgetOnScreen.widgets.length;e++)if(!a.widgetOnScreen.widgets[e].uri)break a;e=-1}0<=e&&(d.position=a.widgetOnScreen.widgets[e].position,a.widgetOnScreen.widgets[e]=d)}"widgets/TimeSlider/Widget"===d.uri&&(!1===d.visible?a.widgetOnScreen.widgets.splice(b,
1):d.closeable=!0)}})(a);a.widgetOnScreen.widgets.push({uri:"widgets/ZoomSlider/Widget",position:{top:5,left:7},version:"1.3"});a.loadingPage||(a.loadingPage={backgroundColor:"#508dca",backgroundImage:{visible:!1},loadingGif:{visible:!0,uri:"configs/loading/images/predefined_loading_1.gif",width:58,height:58}});return a},compatible:!0},{version:"1.4",description:"The version embedded in online3.10.",upgrader:function(a){if(a.theme){var c=a.theme.name;if(("FoldableTheme"===c||"JewelryBoxTheme"===c)&&
a.widgetOnScreen){var b=a.widgetOnScreen.widgets;if(b&&0<b.length)for(var c="themes/"+c+"/widgets/HeaderController/Widget",d=null,e=0;e<b.length;e++)if((d=b[e])&&d.uri===c&&d.position&&310===d.position.paddingRight)d.position.paddingRight=275}}return a},compatible:!0},{version:"2.0beta",description:"The version for Developer Edition beta 2.0.",upgrader:function(a){a.keepAppState=!0;return a},compatible:!0},{version:"2.0",description:"The version for Online 4.1.",upgrader:function(a){return a},compatible:!0}];
this.isCompatible=function(a,c){for(var b=this.getVersionIndex(a),d=this.getVersionIndex(c),b=b+1;b<=d;b++)if(!1===this.versions[b].compatible)return!1;return!0}}f.prototype=new g;return f.prototype.constructor=f});