// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/_base/declare","dijit/_WidgetBase","dojo/_base/array","dojo/_base/lang"],function(g,h,c,d){return g([h],{map:null,postCreate:function(){},getLayerDetailsFromMap:function(e,f){var b={};this.map&&(this.map.webMapResponse&&this.map.webMapResponse.itemInfo&&this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.operationalLayers)&&c.forEach(this.map.webMapResponse.itemInfo.itemData.operationalLayers,d.hitch(this,function(a){a.layerObject&&("ArcGISMapServiceLayer"===
a.layerType||"ArcGISTiledMapServiceLayer"===a.layerType?e.substring(0,e.length-1)===a.url&&(c.forEach(a.resourceInfo.layers,d.hitch(this,function(a){a.id===parseInt(f,10)&&(b.title=a.name)})),c.forEach(a.layers,d.hitch(this,function(a){a.id===parseInt(f,10)&&(a.name&&(b.title=a.name),b.popupInfo=a.popupInfo,a.layerDefinition&&(a.layerDefinition.definitionExpression&&(b.definitionExpression=a.layerDefinition.definitionExpression),a.layerDefinition.drawingInfo&&a.layerDefinition.drawingInfo.renderer&&
(b.renderer=a.layerDefinition.drawingInfo.renderer)))}))):a.url.replace(/.*?:\/\//g,"")===(e+f).replace(/.*?:\/\//g,"")&&(b.title=a.title,b.popupInfo=a.popupInfo,a.layerDefinition&&(a.layerDefinition.definitionExpression&&(b.definitionExpression=a.layerDefinition.definitionExpression),a.layerDefinition.drawingInfo&&a.layerDefinition.drawingInfo.renderer&&(b.renderer=a.layerDefinition.drawingInfo.renderer))))}));return b}})});