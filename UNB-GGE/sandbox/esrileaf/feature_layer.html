<html>
<head>
    <meta charset=utf-8/>
    <title>Simple FeatureLayer</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>

    <!-- Load Leaflet from CDN-->
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v1.0.0-beta.2/leaflet.css"/>
    <script src="http://cdn.leafletjs.com/leaflet/v1.0.0-beta.2/leaflet.js"></script>

    <!-- Load Esri Leaflet from CDN -->
    <script src="//cdn.jsdelivr.net/leaflet.esri/2.0.0-beta.7/esri-leaflet.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            left: 0;
        }
    </style>
</head>
<body>

<div id="map"></div>

<script>
    var map = L.map('map').setView([45.9583096,-66.6623796], 18);

    L.esri.basemapLayer('Streets').addTo(map);
    L.esri.featureLayer({
//        url: '//services5.arcgis.com/xefMCGb6BIZC6ykA/arcgis/rest/services/envparks/FeatureServer/0', //parks
//        url: '//services5.arcgis.com/xefMCGb6BIZC6ykA/arcgis/rest/services/buildings/FeatureServer/0', //buildings
        url: '//services5.arcgis.com/xefMCGb6BIZC6ykA/arcgis/rest/services/garden/FeatureServer/0', //gardens
//        url: '//services5.arcgis.com/xefMCGb6BIZC6ykA/arcgis/rest/services/recreation/FeatureServer/0', //recreation
//        url: '//services5.arcgis.com/xefMCGb6BIZC6ykA/arcgis/rest/services/communities/FeatureServer/0', //communities
//        url: '//services5.arcgis.com/xefMCGb6BIZC6ykA/arcgis/rest/services/trails/FeatureServer/0', //trails
//        url: '//services5.arcgis.com/xefMCGb6BIZC6ykA/arcgis/rest/services/water_sewerlines/FeatureServer/0', //water_sewerlines
//        url: '//services5.arcgis.com/xefMCGb6BIZC6ykA/arcgis/rest/services/roads/FeatureServer/0', //roads

        style : style_feature
    }).addTo(map);
    var count = 0;
    function style_feature(feature){
        count += 1;
        console.log(count);
        console.log(feature);
        return { color: 'red', weight: 0.5};
    }
</script>

</body>
</html>