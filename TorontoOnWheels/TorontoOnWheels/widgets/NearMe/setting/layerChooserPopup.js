// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/NearMe/setting/layerChooserPopup.html":'\x3cdiv data-dojo-attach-point\x3d"layerSelectorContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layerSelectorNode" class\x3d"esriCTLayerSelectorNode"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"cancelButton"\x3e\r\n                ${nls.layerSelector.cancelButton}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 jimu-state-disabled"\r\n                data-dojo-attach-point\x3d"okButton"\x3e\r\n                ${nls.layerSelector.okButton}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/on dojo/text!./layerChooserPopup.html jimu/dijit/LayerChooserFromMap jimu/dijit/Popup".split(" "),function(h,k,l,d,e,f,m,g,n){return h([k,l],{baseClass:"jimu-widget-nearme-setting",templateString:m,_layerChooserFromMap:null,popup:null,searchLayers:[],startup:function(){this.inherited(arguments)},postCreate:function(){this._createLayerSelectorPopup();this._initLayerSelector();f(this.cancelButton,
"click",d.hitch(this,function(){this.onCancelClick()}));f(this.okButton,"click",d.hitch(this,function(){e.contains(this.okButton,"jimu-state-disabled")||(this._getSelectedSearchLayers(),this.onOkClick())}))},_initLayerSelector:function(){var a={multiple:!0,createMapResponse:this.map.webMapResponse,showLayerTypes:["FeatureLayer"],filter:g.createQueryableLayerFilter()};this._layerChooserFromMap=new g(a);this._layerChooserFromMap.placeAt(this.layerSelectorNode);this._layerChooserFromMap.startup();this._layerChooserFromMap._onTreeClick=
d.hitch(this,function(){this._layerChooserFromMap.getSelectedItems().length?e.remove(this.okButton,"jimu-state-disabled"):e.add(this.okButton,"jimu-state-disabled")})},_createLayerSelectorPopup:function(){this.popup=new n({titleLabel:this.nls.layerSelector.selectLayerLabel,width:640,height:200,content:this.layerSelectorContainer})},_getSelectedSearchLayers:function(){var a,c,d,b;this.searchLayers=[];c=this._layerChooserFromMap.getSelectedItems();if(0<c.length)for(a=0;a<c.length;a++)b={url:c[a].layerInfo.layerObject.url,
geometryType:c[a].layerInfo.layerObject.geometryType},b.layerId=c[a].layerId?c[a].layerId:b.url.substr(b.url.lastIndexOf("/")+1,b.url.length),d=b.url.substr(0,b.url.lastIndexOf("/")+1),b.baseURL=d,this.searchLayers.push(b)},onOkClick:function(a){return a},onCancelClick:function(a){return a}})});